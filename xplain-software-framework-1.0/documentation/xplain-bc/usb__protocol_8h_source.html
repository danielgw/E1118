<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: include/usb/usb_protocol.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/usb/usb_protocol.h</h1><a href="usb__protocol_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00041"></a>00041 <span class="preprocessor">#ifndef USB_PROTOCOL_H_INCLUDED</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#define USB_PROTOCOL_H_INCLUDED</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="types_8h.html" title="Type definitions used throughout the library.">types.h</a>&gt;</span>
<a name="l00045"></a>00045 
<a name="l00062"></a><a class="code" href="group__usb__protocol__group.html#ga7127ac2a46b577f2aa1bb9a650e62a3f">00062</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga7127ac2a46b577f2aa1bb9a650e62a3f" title="USB device state.">usb_device_state</a> {
<a name="l00064"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fab4c4f1184ed4e5f31fcba4f2283f0359">00064</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fab4c4f1184ed4e5f31fcba4f2283f0359" title="Device is attached to host, but Vbus is not present.">USB_STATE_ATTACHED</a> = 0,
<a name="l00066"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa25b72bb35524040c703e9474ad03cf38">00066</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa25b72bb35524040c703e9474ad03cf38" title="Vbus is present, but the device has not been reset yet.">USB_STATE_POWERED</a>,
<a name="l00068"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fabb0f4a1c2f62f028bec1d0b55b5d5554">00068</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fabb0f4a1c2f62f028bec1d0b55b5d5554" title="The device has been reset, and is using the default address.">USB_STATE_DEFAULT</a>,
<a name="l00073"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa5d31ab5318c171fbd8ac973ae8d7ef96">00073</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa5d31ab5318c171fbd8ac973ae8d7ef96" title="The device has received its own address, but no configuration has been selected.">USB_STATE_ADDRESS</a>,
<a name="l00075"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa6566e87fb6d54f2da5b7564743df7a47">00075</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa6566e87fb6d54f2da5b7564743df7a47" title="A valid configuration has been selected.">USB_STATE_CONFIGURED</a>,
<a name="l00077"></a><a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab">00077</a>         <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab" title="The device is suspended.">USB_STATE_SUSPENDED</a> = 0x80,
<a name="l00078"></a>00078         USB_STATE_POWERED_SUSPENDED = <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa25b72bb35524040c703e9474ad03cf38" title="Vbus is present, but the device has not been reset yet.">USB_STATE_POWERED</a> | <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab" title="The device is suspended.">USB_STATE_SUSPENDED</a>,
<a name="l00079"></a>00079         USB_STATE_DEFAULT_SUSPENDED = <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fabb0f4a1c2f62f028bec1d0b55b5d5554" title="The device has been reset, and is using the default address.">USB_STATE_DEFAULT</a> | <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab" title="The device is suspended.">USB_STATE_SUSPENDED</a>,
<a name="l00080"></a>00080         USB_STATE_ADDRESS_SUSPENDED = <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa5d31ab5318c171fbd8ac973ae8d7ef96" title="The device has received its own address, but no configuration has been selected.">USB_STATE_ADDRESS</a> | <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab" title="The device is suspended.">USB_STATE_SUSPENDED</a>,
<a name="l00081"></a>00081         USB_STATE_CONFIGURED_SUSPENDED = (<a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa6566e87fb6d54f2da5b7564743df7a47" title="A valid configuration has been selected.">USB_STATE_CONFIGURED</a>
<a name="l00082"></a>00082                                           | <a class="code" href="group__usb__protocol__group.html#gga7127ac2a46b577f2aa1bb9a650e62a3fa64dad39ce2fa9e96d554703f6a65f7ab" title="The device is suspended.">USB_STATE_SUSPENDED</a>),
<a name="l00083"></a>00083 };
<a name="l00084"></a>00084 
<a name="l00092"></a><a class="code" href="group__usb__protocol__group.html#ga59ba7bbb99177a622f3c073fc48b7bc5">00092</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga59ba7bbb99177a622f3c073fc48b7bc5" title="USB device speed.">usb_device_speed</a> {
<a name="l00093"></a><a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5ac9755ae6b86f8148054fd6a342c74acc">00093</a>         <a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5ac9755ae6b86f8148054fd6a342c74acc" title="Speed not known yet.">USB_SPEED_UNKNOWN</a> = 0,  
<a name="l00094"></a><a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a0ec4f8f66feaf7ee8f2ee618302e9470">00094</a>         <a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a0ec4f8f66feaf7ee8f2ee618302e9470" title="Low speed (1.5 Mb/s).">USB_SPEED_LOW</a>,          
<a name="l00095"></a><a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a0f17d0b9928086c6114fea73e08f1780">00095</a>         <a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a0f17d0b9928086c6114fea73e08f1780" title="Full speed (12 Mb/s).">USB_SPEED_FULL</a>,         
<a name="l00096"></a><a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a57eeede6d769b09c01ac9c9c62fef8c9">00096</a>         <a class="code" href="group__usb__protocol__group.html#gga59ba7bbb99177a622f3c073fc48b7bc5a57eeede6d769b09c01ac9c9c62fef8c9" title="High speed (480 Mb/s).">USB_SPEED_HIGH</a>,         
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 
<a name="l00102"></a><a class="code" href="group__usb__protocol__group.html#ga36b2b70fae97945b76c666573a8ff4b3">00102</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga36b2b70fae97945b76c666573a8ff4b3" title="USB request types (bmRequestType).">usb_reqtype</a> {
<a name="l00103"></a><a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3a51d5623a64a8ef2a06733d5f93bf9201">00103</a>         <a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3a51d5623a64a8ef2a06733d5f93bf9201" title="Request defined by USB specification.">USB_REQTYPE_STANDARD</a>    = 0, 
<a name="l00104"></a><a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3ab41eb84803ae7a7c4cdd7183dd8e61e1">00104</a>         <a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3ab41eb84803ae7a7c4cdd7183dd8e61e1" title="Class-specific request.">USB_REQTYPE_CLASS</a>       = 1, 
<a name="l00105"></a><a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3a363efcb365ac6b59871a1dc8db3d2434">00105</a>         <a class="code" href="group__usb__protocol__group.html#gga36b2b70fae97945b76c666573a8ff4b3a363efcb365ac6b59871a1dc8db3d2434" title="Vendor-specific request.">USB_REQTYPE_VENDOR</a>      = 2, 
<a name="l00106"></a>00106 };
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="preprocessor">#define USB_REQTYPE_STANDARD_MASK       (USB_REQTYPE_STANDARD &lt;&lt; 5)</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#define USB_REQTYPE_CLASS_MASK          (USB_REQTYPE_CLASS &lt;&lt; 5)</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span><span class="preprocessor">#define USB_REQTYPE_VENDOR_MASK         (USB_REQTYPE_VENDOR &lt;&lt; 5)</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00115"></a><a class="code" href="group__usb__protocol__group.html#ga0aa3d30468e7998223f0d3114e9aee89">00115</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga0aa3d30468e7998223f0d3114e9aee89" title="USB recipient codes (bmRequestType).">usb_recipient</a> {
<a name="l00116"></a>00116         USB_RECIP_DEVICE        = 0,
<a name="l00117"></a>00117         USB_RECIP_INTERFACE     = 1,
<a name="l00118"></a>00118         USB_RECIP_ENDPOINT      = 2,
<a name="l00119"></a>00119         USB_RECIP_OTHER         = 3,
<a name="l00120"></a>00120 };
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="preprocessor">#define USB_RECIP_DEVICE_MASK           (USB_RECIP_DEVICE &lt;&lt; 0)</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span><span class="preprocessor">#define USB_RECIP_INTERFACE_MASK        (USB_RECIP_INTERFACE &lt;&lt; 0)</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="preprocessor">#define USB_RECIP_ENDPOINT_MASK         (USB_RECIP_ENDPOINT &lt;&lt; 0)</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span><span class="preprocessor">#define USB_RECIP_OTHER_MASK            (USB_RECIP_OTHER &lt;&lt; 0)</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>
<a name="l00130"></a><a class="code" href="group__usb__protocol__group.html#gab43332ff8dbad3dd3c8c882b1bd68a89">00130</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#gab43332ff8dbad3dd3c8c882b1bd68a89" title="Standard USB requests (bRequest).">usb_reqid</a> {
<a name="l00131"></a>00131         USB_REQ_GET_STATUS              =  0,
<a name="l00132"></a>00132         USB_REQ_CLEAR_FEATURE           =  1,
<a name="l00133"></a>00133         USB_REQ_SET_FEATURE             =  3,
<a name="l00134"></a>00134         USB_REQ_SET_ADDRESS             =  5,
<a name="l00135"></a>00135         USB_REQ_GET_DESCRIPTOR          =  6,
<a name="l00136"></a>00136         USB_REQ_SET_DESCRIPTOR          =  7,
<a name="l00137"></a>00137         USB_REQ_GET_CONFIGURATION       =  8,
<a name="l00138"></a>00138         USB_REQ_SET_CONFIGURATION       =  9,
<a name="l00139"></a>00139         USB_REQ_GET_INTERFACE           = 10,
<a name="l00140"></a>00140         USB_REQ_SET_INTERFACE           = 11,
<a name="l00141"></a>00141         USB_REQ_SYNCH_FRAME             = 12,
<a name="l00142"></a>00142 };
<a name="l00143"></a>00143 
<a name="l00154"></a><a class="code" href="group__usb__protocol__group.html#gab9975b89ad7079085d0300eab037c3ac">00154</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#gab9975b89ad7079085d0300eab037c3ac" title="Standard USB device feature/status flags.">usb_device_feature</a> {
<a name="l00155"></a><a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca762e18607a236d99504f5838e96beb36">00155</a>         <a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca762e18607a236d99504f5838e96beb36" title="Does not draw power from bus.">USB_DEV_STATUS_SELF_POWERED</a>     = 0, 
<a name="l00156"></a><a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca9d1f5e6a07463ac38743db611c2c414a">00156</a>         <a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca9d1f5e6a07463ac38743db611c2c414a" title="Remote wakeup enabled.">USB_DEV_FEATURE_REMOTE_WAKEUP</a>   = 1, 
<a name="l00157"></a><a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca6724ffaefab5a3c54b199c4d1ea7b6ff">00157</a>         <a class="code" href="group__usb__protocol__group.html#ggab9975b89ad7079085d0300eab037c3aca6724ffaefab5a3c54b199c4d1ea7b6ff" title="USB test mode.">USB_DEV_FEATURE_TEST_MODE</a>       = 2, 
<a name="l00158"></a>00158 };
<a name="l00159"></a>00159 
<a name="l00163"></a><a class="code" href="group__usb__protocol__group.html#gac46bc23132eb03cefa56ba47024ced5d">00163</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#gac46bc23132eb03cefa56ba47024ced5d" title="Standard USB endpoint feature/status flags.">usb_endpoint_feature</a> {
<a name="l00164"></a>00164         USB_EP_FEATURE_HALT             = 0,
<a name="l00165"></a>00165 };
<a name="l00166"></a>00166 
<a name="l00170"></a><a class="code" href="group__usb__protocol__group.html#gade3fc5b71e88ed167a8c8d67ee087db3">00170</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#gade3fc5b71e88ed167a8c8d67ee087db3" title="Standard USB Test Mode Selectors.">usb_test_mode_selector</a> {
<a name="l00171"></a>00171         USB_TEST_J                      = 0x01,
<a name="l00172"></a>00172         USB_TEST_K                      = 0x02,
<a name="l00173"></a>00173         USB_TEST_SE0_NAK                = 0x03,
<a name="l00174"></a>00174         USB_TEST_PACKET                 = 0x04,
<a name="l00175"></a>00175         USB_TEST_FORCE_ENABLE           = 0x05,
<a name="l00176"></a>00176 };
<a name="l00177"></a>00177 
<a name="l00181"></a><a class="code" href="group__usb__protocol__group.html#ga87d46dd117d939964c939f1518dec93f">00181</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga87d46dd117d939964c939f1518dec93f" title="Standard USB descriptor types.">usb_descriptor_type</a> {
<a name="l00182"></a>00182         USB_DT_DEVICE                   = 1,
<a name="l00183"></a>00183         USB_DT_CONFIGURATION            = 2,
<a name="l00184"></a>00184         USB_DT_STRING                   = 3,
<a name="l00185"></a>00185         USB_DT_INTERFACE                = 4,
<a name="l00186"></a>00186         USB_DT_ENDPOINT                 = 5,
<a name="l00187"></a>00187         USB_DT_DEVICE_QUALIFIER         = 6,
<a name="l00188"></a>00188         USB_DT_OTHER_SPEED_CONFIGURATION = 7,
<a name="l00189"></a>00189         USB_DT_INTERFACE_POWER          = 8,
<a name="l00190"></a>00190 };
<a name="l00191"></a>00191 
<a name="l00195"></a><a class="code" href="group__usb__protocol__group.html#ga444fab460abae3addb8dae7c91cc205a">00195</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga444fab460abae3addb8dae7c91cc205a" title="Standard USB endpoint transfer types.">usb_ep_xfer_type</a> {
<a name="l00196"></a>00196         USB_EP_XFER_CONTROL             = 0x00,
<a name="l00197"></a>00197         USB_EP_XFER_ISOCHRONOUS         = 0x01,
<a name="l00198"></a>00198         USB_EP_XFER_BULK                = 0x02,
<a name="l00199"></a>00199         USB_EP_XFER_INTERRUPT           = 0x03,
<a name="l00200"></a>00200 };
<a name="l00201"></a>00201 
<a name="l00205"></a><a class="code" href="group__usb__protocol__group.html#ga1f92deaf695c06566999f0c5343978c1">00205</a> <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga1f92deaf695c06566999f0c5343978c1" title="Standard USB language IDs for string descriptors.">usb_langid</a> {
<a name="l00206"></a><a class="code" href="group__usb__protocol__group.html#gga1f92deaf695c06566999f0c5343978c1a8acad914e2d28c9bb1d2d3cc74c5b39e">00206</a>         <a class="code" href="group__usb__protocol__group.html#gga1f92deaf695c06566999f0c5343978c1a8acad914e2d28c9bb1d2d3cc74c5b39e" title="English (United States).">USB_LANGID_EN_US</a>                = 0x0406, 
<a name="l00207"></a>00207 };
<a name="l00208"></a>00208 
<a name="l00212"></a><a class="code" href="group__usb__protocol__group.html#ga0316d8f43a1648b76df257332b26aeb9">00212</a> <span class="preprocessor">#define USB_EP_ADDR_MASK                0x0f</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>
<a name="l00216"></a><a class="code" href="group__usb__protocol__group.html#ga1d46c8a7ba5292aa99ef445df6f190af">00216</a> <span class="preprocessor">#define USB_DIR_IN                      0x80</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span>
<a name="l00220"></a><a class="code" href="group__usb__protocol__group.html#ga646a87bcd3711adbff2a18ad122cf35a">00220</a> <span class="preprocessor">#define USB_DIR_OUT                     0x00</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>
<a name="l00228"></a><a class="code" href="group__usb__protocol__group.html#ga27dacd4e0b04d4ef7b8aadf6ea886f3c">00228</a> <span class="preprocessor">#define USB_MAX_DESC_LEN                255</span>
<a name="l00229"></a>00229 <span class="preprocessor"></span>
<a name="l00230"></a>00230 <span class="comment">/*</span>
<a name="l00231"></a>00231 <span class="comment"> * 2-byte alignment is OK for setup requests and device (qualifier)</span>
<a name="l00232"></a>00232 <span class="comment"> * descriptors.</span>
<a name="l00233"></a>00233 <span class="comment"> */</span>
<a name="l00234"></a>00234 <a class="code" href="group__compiler__group.html#gae2c02ff865ca6538b4b1bddbf2a6876c" title="Set maximum alignment for subsequent struct and union definitions to alignment.">COMPILER_PACK_SET</a>(2);
<a name="l00235"></a>00235 
<a name="l00241"></a><a class="code" href="structusb__setup__req.html">00241</a> <span class="keyword">struct </span><a class="code" href="structusb__setup__req.html" title="A USB Device SETUP request.">usb_setup_req</a> {
<a name="l00242"></a>00242         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bmRequestType;
<a name="l00243"></a>00243         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bRequest;
<a name="l00244"></a>00244         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> wValue;
<a name="l00245"></a>00245         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> wIndex;
<a name="l00246"></a>00246         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> wLength;
<a name="l00247"></a>00247 };
<a name="l00248"></a>00248 
<a name="l00250"></a><a class="code" href="group__usb__protocol__group.html#ga2884802a16f19b932f7b5da8b199ea4a">00250</a> <span class="preprocessor">#define usb_setup_is_in(req)            (!!((req)-&gt;bmRequestType &amp; USB_DIR_IN))</span>
<a name="l00251"></a>00251 <span class="preprocessor"></span>
<a name="l00252"></a><a class="code" href="group__usb__protocol__group.html#ga67761209b192e168d2281dfd233c120a">00252</a> <span class="preprocessor">#define usb_setup_is_out(req)           (!((req)-&gt;bmRequestType &amp; USB_DIR_IN))</span>
<a name="l00253"></a>00253 <span class="preprocessor"></span>
<a name="l00254"></a><a class="code" href="group__usb__protocol__group.html#ga75f3346a526996ab3458b675e956df0d">00254</a> <span class="preprocessor">#define usb_setup_type(req)             (((req)-&gt;bmRequestType &gt;&gt; 5) &amp; 3)</span>
<a name="l00255"></a>00255 <span class="preprocessor"></span>
<a name="l00256"></a><a class="code" href="group__usb__protocol__group.html#gaf91052b7d8ad4aa2541f6dd59ac7df14">00256</a> <span class="preprocessor">#define usb_setup_recipient(req)        ((req)-&gt;bmRequestType &amp; 0x1f)</span>
<a name="l00257"></a>00257 <span class="preprocessor"></span>
<a name="l00261"></a><a class="code" href="structusb__device__descriptor.html">00261</a> <span class="keyword">struct </span><a class="code" href="structusb__device__descriptor.html" title="Standard USB device descriptor.">usb_device_descriptor</a> {
<a name="l00262"></a>00262         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00263"></a>00263         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00264"></a>00264         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> bcdUSB;
<a name="l00265"></a>00265         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceClass;
<a name="l00266"></a>00266         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceSubClass;
<a name="l00267"></a>00267         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceProtocol;
<a name="l00268"></a>00268         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bMaxPacketSize0;
<a name="l00269"></a>00269         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> idVendor;
<a name="l00270"></a>00270         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> idProduct;
<a name="l00271"></a>00271         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> bcdDevice;
<a name="l00272"></a>00272         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> iManufacturer;
<a name="l00273"></a>00273         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> iProduct;
<a name="l00274"></a>00274         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> iSerialNumber;
<a name="l00275"></a>00275         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bNumConfigurations;
<a name="l00276"></a>00276 };
<a name="l00277"></a>00277 
<a name="l00286"></a><a class="code" href="structusb__device__qualifier__descriptor.html">00286</a> <span class="keyword">struct </span><a class="code" href="structusb__device__qualifier__descriptor.html" title="Standard USB device qualifier descriptor.">usb_device_qualifier_descriptor</a> {
<a name="l00287"></a>00287         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00288"></a>00288         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00289"></a>00289         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> bcdUSB;
<a name="l00290"></a>00290         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceClass;
<a name="l00291"></a>00291         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceSubClass;
<a name="l00292"></a>00292         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDeviceProtocol;
<a name="l00293"></a>00293         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bMaxPacketSize0;
<a name="l00294"></a>00294         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bNumConfigurations;
<a name="l00295"></a>00295         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bReserved;
<a name="l00296"></a>00296 };
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">/* Configuration and associated descriptors must be packed tightly */</span>
<a name="l00299"></a>00299 <a class="code" href="group__compiler__group.html#gae2c02ff865ca6538b4b1bddbf2a6876c" title="Set maximum alignment for subsequent struct and union definitions to alignment.">COMPILER_PACK_SET</a>(1);
<a name="l00300"></a>00300 
<a name="l00304"></a><a class="code" href="structusb__configuration__descriptor.html">00304</a> <span class="keyword">struct </span><a class="code" href="structusb__configuration__descriptor.html" title="Standard USB configuration descriptor.">usb_configuration_descriptor</a> {
<a name="l00305"></a>00305         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00306"></a>00306         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00307"></a>00307         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> wTotalLength;
<a name="l00308"></a>00308         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bNumInterfaces;
<a name="l00309"></a>00309         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bConfigurationValue;
<a name="l00310"></a>00310         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> iConfiguration;
<a name="l00311"></a>00311         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bmAttributes;
<a name="l00312"></a>00312         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bMaxPower;
<a name="l00313"></a>00313 };
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="group__usb__protocol__group.html#gac7063e965def0eaeb4d45a6f9048dc53">00315</a> <span class="preprocessor">#define USB_CONFIG_ATTR_MUST_SET        (1U &lt;&lt; 7) //!&lt; Must always be set</span>
<a name="l00316"></a><a class="code" href="group__usb__protocol__group.html#gaf1b445db8c331630bbedb383544ed80b">00316</a> <span class="preprocessor"></span><span class="preprocessor">#define USB_CONFIG_ATTR_SELF_POWERED    (1U &lt;&lt; 6) //!&lt; Self-powered</span>
<a name="l00317"></a><a class="code" href="group__usb__protocol__group.html#gab8f513d1888f75d8e18960e1b1f3f747">00317</a> <span class="preprocessor"></span><span class="preprocessor">#define USB_CONFIG_ATTR_REMOTE_WAKEUP   (1U &lt;&lt; 5) //!&lt; Supports remote wakeup</span>
<a name="l00318"></a><a class="code" href="group__usb__protocol__group.html#ga55d9db758a4f408eebf4b26c6001ac9b">00318</a> <span class="preprocessor"></span><span class="preprocessor">#define USB_CONFIG_MAX_POWER(ma)        (((ma) + 1) / 2) //!&lt; Max power in mA</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span>
<a name="l00323"></a><a class="code" href="structusb__interface__descriptor.html">00323</a> <span class="keyword">struct </span><a class="code" href="structusb__interface__descriptor.html" title="Standard USB interface descriptor.">usb_interface_descriptor</a> {
<a name="l00324"></a>00324         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00325"></a>00325         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00326"></a>00326         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bInterfaceNumber;
<a name="l00327"></a>00327         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bAlternateSetting;
<a name="l00328"></a>00328         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bNumEndpoints;
<a name="l00329"></a>00329         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bInterfaceClass;
<a name="l00330"></a>00330         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bInterfaceSubClass;
<a name="l00331"></a>00331         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bInterfaceProtocol;
<a name="l00332"></a>00332         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> iInterface;
<a name="l00333"></a>00333 };
<a name="l00334"></a>00334 
<a name="l00338"></a><a class="code" href="structusb__endpoint__descriptor.html">00338</a> <span class="keyword">struct </span><a class="code" href="structusb__endpoint__descriptor.html" title="Standard USB endpoint descriptor.">usb_endpoint_descriptor</a> {
<a name="l00339"></a>00339         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00340"></a>00340         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00341"></a>00341         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bEndpointAddress;
<a name="l00342"></a>00342         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bmAttributes;
<a name="l00343"></a>00343         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> wMaxPacketSize;
<a name="l00344"></a>00344         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bInterval;
<a name="l00345"></a>00345 };
<a name="l00346"></a>00346 
<a name="l00348"></a><a class="code" href="group__usb__protocol__group.html#ga7fdcb88595d39e694f36b311375e9eb7">00348</a> <span class="preprocessor">#define usb_ep_index(desc)      ((desc)-&gt;bEndpointAddress &amp; USB_EP_ADDR_MASK)</span>
<a name="l00349"></a>00349 <span class="preprocessor"></span>
<a name="l00350"></a><a class="code" href="group__usb__protocol__group.html#gad3a7c636b19998bdb3cb584f1e795b09">00350</a> <span class="preprocessor">#define usb_ep_is_in(desc)      (!!((desc)-&gt;bEndpointAddress &amp; USB_DIR_IN))</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span>
<a name="l00352"></a><a class="code" href="group__usb__protocol__group.html#ga61e9d99b82650c53fde5b9ae2722fc27">00352</a> <span class="preprocessor">#define usb_ep_is_out(desc)     (!((desc)-&gt;bEndpointAddress &amp; USB_DIR_IN))</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span>
<a name="l00354"></a><a class="code" href="group__usb__protocol__group.html#gaa984b20e4c8fc6378fdfa8bceb86a8f5">00354</a> <span class="preprocessor">#define usb_ep_xfer(desc)       ((desc)-&gt;bmAttributes &amp; 0x03)</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>
<a name="l00356"></a>00356 <span class="comment">/* String descriptors may be 2-byte aligned */</span>
<a name="l00357"></a>00357 <a class="code" href="group__compiler__group.html#gae2c02ff865ca6538b4b1bddbf2a6876c" title="Set maximum alignment for subsequent struct and union definitions to alignment.">COMPILER_PACK_SET</a>(2);
<a name="l00358"></a>00358 
<a name="l00362"></a><a class="code" href="structusb__string__descriptor.html">00362</a> <span class="keyword">struct </span><a class="code" href="structusb__string__descriptor.html" title="A standard USB string descriptor.">usb_string_descriptor</a> {
<a name="l00363"></a>00363         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bLength;
<a name="l00364"></a>00364         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> bDescriptorType;
<a name="l00365"></a>00365         <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a>  bString[0];
<a name="l00366"></a>00366 };
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <a class="code" href="group__compiler__group.html#ga38d28b622a4bc7b0f3fb2be2ef1e0086" title="Set default alignment for subsequent struct and union definitions.">COMPILER_PACK_RESET</a>();
<a name="l00369"></a>00369 
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <span class="preprocessor">#endif </span><span class="comment">/* USB_PROTOCOL_H_INCLUDED */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:34 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
