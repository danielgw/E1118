<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: include/usb/dev_mux.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/usb/dev_mux.h</h1><a href="dev__mux_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef USB_DEV_MUX_H_INCLUDED</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define USB_DEV_MUX_H_INCLUDED</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="buffer_8h.html" title="Generic Buffer structure and associated helper functions.">buffer.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="usb__protocol_8h.html" title="USB protocol definitions.">usb/usb_protocol.h</a>&gt;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">struct </span><a class="code" href="structusb__request.html" title="A USB request.">usb_request</a>;
<a name="l00045"></a>00045 <span class="keyword">struct </span><a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>;
<a name="l00046"></a>00046 
<a name="l00060"></a><a class="code" href="structudm__interface.html">00060</a> <span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> {
<a name="l00087"></a><a class="code" href="structudm__interface.html#ac5955f73bfd920b0959a5ed5cd490f69">00087</a>         <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> (*<a class="code" href="structudm__interface.html#ac5955f73bfd920b0959a5ed5cd490f69" title="Enable the interface.">enable</a>)(<span class="keyword">struct </span><a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>, <span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface,
<a name="l00088"></a>00088                         <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a> setting);
<a name="l00103"></a><a class="code" href="structudm__interface.html#a03b2e2027da9c64763becfb188d6b4c6">00103</a>         void    (*<a class="code" href="structudm__interface.html#a03b2e2027da9c64763becfb188d6b4c6" title="Disable the interface.">disable</a>)(<span class="keyword">struct </span><a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>, <span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface);
<a name="l00119"></a><a class="code" href="structudm__interface.html#a0378683b6ca0cde9fee555d02c231018">00119</a>         <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> (*<a class="code" href="structudm__interface.html#a0378683b6ca0cde9fee555d02c231018" title="Handle a control request directed at an interface.">setup</a>)(<span class="keyword">struct </span><a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>, <span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface,
<a name="l00120"></a>00120                         <span class="keyword">struct </span><a class="code" href="structusb__setup__req.html" title="A USB Device SETUP request.">usb_setup_req</a> *req);
<a name="l00144"></a><a class="code" href="structudm__interface.html#ae2b0c1480350800ae4f9d3ce12fa9b58">00144</a>         <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> (*<a class="code" href="structudm__interface.html#ae2b0c1480350800ae4f9d3ce12fa9b58" title="Get the interface descriptor.">get_iface_descriptor</a>)(<span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface,
<a name="l00145"></a>00145                         <span class="keyword">struct </span><a class="code" href="structusb__request.html" title="A USB request.">usb_request</a> *req,
<a name="l00146"></a>00146                         <span class="keyword">enum</span> <a class="code" href="group__usb__protocol__group.html#ga59ba7bbb99177a622f3c073fc48b7bc5" title="USB device speed.">usb_device_speed</a> speed,
<a name="l00147"></a>00147                         <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a> len);
<a name="l00166"></a><a class="code" href="structudm__interface.html#a8b232220849ae9b291114bd647ed8475">00166</a>         void    (*<a class="code" href="structudm__interface.html#a8b232220849ae9b291114bd647ed8475" title="Free any data allocated by get_iface_descriptor().">free_descriptor</a>)(<span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface,
<a name="l00167"></a>00167                         <span class="keyword">struct </span><a class="code" href="structusb__request.html" title="A USB request.">usb_request</a> *req);
<a name="l00168"></a>00168 
<a name="l00170"></a><a class="code" href="structudm__interface.html#a288bd5eb2855c8bde14d65275788747a">00170</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> <a class="code" href="structudm__interface.html#a288bd5eb2855c8bde14d65275788747a" title="The interface number identifying this interface.">iface_number</a>;
<a name="l00172"></a><a class="code" href="structudm__interface.html#a5698c318660e64dd896777ae8f06449c">00172</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> <a class="code" href="structudm__interface.html#a5698c318660e64dd896777ae8f06449c" title="The current setting of this interface.">cur_setting</a>;
<a name="l00173"></a>00173 };
<a name="l00174"></a>00174 
<a name="l00181"></a><a class="code" href="structudm__config.html">00181</a> <span class="keyword">struct </span><a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> {
<a name="l00183"></a><a class="code" href="structudm__config.html#a029986c579cc717b0179b08fe14d7b47">00183</a>         <span class="keyword">struct </span><a class="code" href="structusb__configuration__descriptor.html" title="Standard USB configuration descriptor.">usb_configuration_descriptor</a>     <a class="code" href="structudm__config.html#a029986c579cc717b0179b08fe14d7b47" title="The configuration descriptor for this configuration.">desc</a>;
<a name="l00188"></a><a class="code" href="structudm__config.html#a211827047caabe29fc9be426adc506c5">00188</a>         <span class="keyword">struct </span><a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a>            *<a class="code" href="structudm__config.html#a211827047caabe29fc9be426adc506c5" title="The interfaces available when this configuration is active.">interface</a>[];
<a name="l00189"></a>00189 };
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> *<a class="code" href="group__usb__dev__mux.html#gaa323d6f0a542bd5e611634e89d0852b8" title="Create a new USB device configuration.">udm_create_config</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> value,
<a name="l00192"></a>00192                 <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> nr_interfaces);
<a name="l00193"></a>00193 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__usb__dev__mux.html#ga297f1a697e4aa8f4f8d450864b670165" title="Add an interface to a configuration.">udm_config_add_interface</a>(<span class="keyword">struct</span> <a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> *config,
<a name="l00194"></a>00194                 <span class="keyword">struct</span> <a class="code" href="structudm__interface.html" title="A USB device interface.">udm_interface</a> *iface);
<a name="l00195"></a>00195 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__usb__dev__mux.html#ga665de55fcf0adbbb1b12a8ddaa313f04" title="Set the maximum power consumption of a configuration.">udm_config_set_max_power</a>(<span class="keyword">struct</span> <a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> *config,
<a name="l00196"></a>00196                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> milliamps);
<a name="l00197"></a>00197 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__usb__dev__mux.html#ga97ed794f81c25ad0fbf4176816ec1984" title="Mark a configuration as self-powered.">udm_config_set_self_powered</a>(<span class="keyword">struct</span> <a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> *config);
<a name="l00198"></a>00198 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__usb__dev__mux.html#ga4e984caec69fa2faf55aa481afd92d56" title="Mark a configuration as bus-powered.">udm_config_set_bus_powered</a>(<span class="keyword">struct</span> <a class="code" href="structudm__config.html" title="A USB device configuration.">udm_config</a> *config);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="group__usb__dev__mux.html#ga0cc47e29580273c6b6431ef287bdec51" title="Add a string descriptor buffer initialized from an 8-bit ASCII encoded string.">udm_submit_ascii_string_desc</a>(<span class="keyword">struct</span> <a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>,
<a name="l00201"></a>00201                 <span class="keyword">struct</span> <a class="code" href="structusb__request.html" title="A USB request.">usb_request</a> *req, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__utility__group.html#gad8ab729381f270b100f3d05b6c6676fc" title="Stringify a macro argument without expansion.">str</a>,
<a name="l00202"></a>00202                 <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a> max_len);
<a name="l00203"></a>00203 <span class="keyword">extern</span> <span class="keywordtype">int</span> udm_submit_utf8_string_desc(<span class="keyword">struct</span> <a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>,
<a name="l00204"></a>00204                 <span class="keyword">struct</span> <a class="code" href="structusb__request.html" title="A USB request.">usb_request</a> *req, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__utility__group.html#gad8ab729381f270b100f3d05b6c6676fc" title="Stringify a macro argument without expansion.">str</a>,
<a name="l00205"></a>00205                 <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a> max_len);
<a name="l00206"></a>00206 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="group__usb__dev__mux.html#gad6724e2a44b60605562e1b9e17717fbb" title="Add a string descriptor buffer initialized from a UTF-16LE encoded string.">udm_submit_utf16le_string_desc</a>(<span class="keyword">struct</span> <a class="code" href="structudc.html" title="A USB Device Controller.">udc</a> *<a class="code" href="structudc.html" title="A USB Device Controller.">udc</a>,
<a name="l00207"></a>00207                 <span class="keyword">struct</span> <a class="code" href="structusb__request.html" title="A USB request.">usb_request</a> *req, <span class="keyword">const</span> <a class="code" href="types_8h.html#a467964c91885f34b69185f7356842d70" title="Unsigned 16-bit quantity, little endian byte order.">le16_t</a> *<a class="code" href="group__utility__group.html#gad8ab729381f270b100f3d05b6c6676fc" title="Stringify a macro argument without expansion.">str</a>,
<a name="l00208"></a>00208                 <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a> max_len);
<a name="l00209"></a>00209 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="preprocessor">#endif </span><span class="comment">/* USB_DEV_MUX_H_INCLUDED */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:34 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
