<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: Memory-Mapped Input/Output (MMIO)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Memory-Mapped Input/Output (MMIO)</h1>
<p><div class="dynheader">
Collaboration diagram for Memory-Mapped Input/Output (MMIO):</div>
<div class="dynsection">
<center><table><tr><td><img src="group__mmio__group.png" border="0" alt="" usemap="#group____mmio____group_map"/>
<map name="group____mmio____group_map" id="group____mmio____group">
<area shape="rect" href="group__regs__group.html" title="Internal Register Definitions" alt="" coords="296,5,477,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__regs__group.html">Internal Register Definitions</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mmio__group.html#gafac96bdc94d15db85b42ea87b648d8d9">AVR_MMIO_OFFSET</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Memory mapped register address offset.  <a href="#gafac96bdc94d15db85b42ea87b648d8d9"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mmio__group.html#gaac90b9f4e9a02871ae065f662fb43025">mmio_read8</a> (const void *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a byte from a memory-mapped register.  <a href="#gaac90b9f4e9a02871ae065f662fb43025"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These accessors are used to access memory-mapped I/O registers on the chip as well as external devices hooked up through the external bus interface. Accessing such registers usually have side-effects, so these accessors ensure that the registers are accessed exactly as many times as specified.</p>
<p>Traditionally, such registers are accessed through pointers declared as "volatile", but using dedicated accessors has a number of advantages:</p>
<ul>
<li>Conceptually, it makes much more sense to provide special access semantics as part of an operation instead of the data associated with it.</li>
<li>The optimal way to access a register may vary from compiler to compiler (for example, gcc appears to generate slightly better code from inline assembly than from volatile access.) Such details are best hidden behind an accessor layer like this.</li>
<li>When dedicated accessors are used, it becomes very obvious that the code using them are in fact dealing with I/O. A volatile struct access looks just like any other struct access. </li>
</ul>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gafac96bdc94d15db85b42ea87b648d8d9"></a><!-- doxytag: member="io.h::AVR_MMIO_OFFSET" ref="gafac96bdc94d15db85b42ea87b648d8d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AVR_MMIO_OFFSET&nbsp;&nbsp;&nbsp;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Memory mapped register address offset. </p>
<p>Offset that needs to be added to an I/O space address to get the corresponding memory mapped address. </p>

<p>Definition at line <a class="el" href="cpu_2mega_2include_2cpu_2io_8h_source.html#l00052">52</a> of file <a class="el" href="cpu_2mega_2include_2cpu_2io_8h_source.html">io.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaac90b9f4e9a02871ae065f662fb43025"></a><!-- doxytag: member="io.h::mmio_read8" ref="gaac90b9f4e9a02871ae065f662fb43025" args="(const void *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> mmio_read8 </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a byte from a memory-mapped register. </p>
<p>The compiler will optimise this to an I/O space access when applicable.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>A virtual address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The value at the virtual address specified by <em>p</em>. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2mega_2include_2cpu_2io_8h_source.html#l00067">67</a> of file <a class="el" href="cpu_2mega_2include_2cpu_2io_8h_source.html">io.h</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:35 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
