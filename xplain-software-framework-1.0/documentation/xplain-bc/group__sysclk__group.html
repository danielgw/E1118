<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: System Clock Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>System Clock Management<br/>
<small>
[<a class="el" href="group__clk__group.html">Clock Management</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for System Clock Management:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__sysclk__group.png" border="0" alt="" usemap="#group____sysclk____group_map"/>
<map name="group____sysclk____group_map" id="group____sysclk____group">
<area shape="rect" href="group__clk__group.html" title="Clock Management" alt="" coords="5,5,139,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Enabling and disabling synchronous clocks</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpe7659beb9107dfc4e19a30a589dee67d"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga6e9d5c5dc25b65c71fc5dc271cfbe94b">sysclk_enable_module</a> (<a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable a module clock derived from the system clock.  <a href="#ga6e9d5c5dc25b65c71fc5dc271cfbe94b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga5aa49263d2aff11ed805d9b1f6688c1a">sysclk_disable_module</a> (<a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable a module clock derived from the system clock.  <a href="#ga5aa49263d2aff11ed805d9b1f6688c1a"></a><br/></td></tr>
<tr><td colspan="2"><h2>System Clock Initialization</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp4426421afb4936b64c78a66580d24b5b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga242399e48a97739c88b4d0c00f6101de">sysclk_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the synchronous clock system.  <a href="#ga242399e48a97739c88b4d0c00f6101de"></a><br/></td></tr>
<tr><td colspan="2"><h2>Maskable module clock IDs</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp6e81c3dc2beca83268c7a5e7e85117b2"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga4c530814a371c788f9608e46b81feb93">SYSCLK_ADC</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A/D Converter.  <a href="#ga4c530814a371c788f9608e46b81feb93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga4941f8bf9c260e3d982e281fd463fe26">SYSCLK_SPI</a>&nbsp;&nbsp;&nbsp;0x0004</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SPI controller.  <a href="#ga4941f8bf9c260e3d982e281fd463fe26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga03be785696a3e76b1b3c6ea6104ac630">SYSCLK_TC1</a>&nbsp;&nbsp;&nbsp;0x0008</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer/Counter 1.  <a href="#ga03be785696a3e76b1b3c6ea6104ac630"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#gabe7aa477c7c5b3887df1d762a750b04a">SYSCLK_TC0</a>&nbsp;&nbsp;&nbsp;0x0020</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer/Counter 0.  <a href="#gabe7aa477c7c5b3887df1d762a750b04a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#gacff12dc14a3213e65aadbc4840b0d4ba">SYSCLK_TC2</a>&nbsp;&nbsp;&nbsp;0x0040</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer/Counter 2.  <a href="#gacff12dc14a3213e65aadbc4840b0d4ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#gae6761c065555d454a6e104909f151289">SYSCLK_TWI</a>&nbsp;&nbsp;&nbsp;0x0080</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TWI controller.  <a href="#gae6761c065555d454a6e104909f151289"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga1acb0cc02d975a6d9d4e92e56a2438a0">SYSCLK_USART1</a>&nbsp;&nbsp;&nbsp;0x0101</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">USART 1 replicated due to chip naming convention */.  <a href="#ga1acb0cc02d975a6d9d4e92e56a2438a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaeeea970aa1d68f0726f6ac7b19882491"></a><!-- doxytag: member="sysclk_group::SYSCLK_USART0" ref="gaeeea970aa1d68f0726f6ac7b19882491" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SYSCLK_USART0</b>&nbsp;&nbsp;&nbsp;SYSCLK_USART1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga76e33427b97ac7e4aba29604e5d58a45">SYSCLK_TC3</a>&nbsp;&nbsp;&nbsp;0x0108</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer/counter 3.  <a href="#ga76e33427b97ac7e4aba29604e5d58a45"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sysclk__group.html#ga0acdf4ca4b306373eb79b5fbc7409be7">SYSCLK_USB</a>&nbsp;&nbsp;&nbsp;0x0180</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">USB controller.  <a href="#ga0acdf4ca4b306373eb79b5fbc7409be7"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The <em>sysclk</em> API covers the <em>system clock</em> and all clocks derived from it. The system clock is a chip-internal clock on which all <em>synchronous clocks</em>, i.e. CPU and bus/peripheral clocks, are based. The system clock is typically generated from one of a variety of sources, which may include crystal and RC oscillators as well as PLLs. The clocks derived from the system clock are sometimes also known as <em>synchronous clocks</em>, since they always run synchronously with respect to each other, as opposed to <em>generic clocks</em> which may run from different oscillators or PLLs.</p>
<p>The sysclk API is partially chip- or platform-specific. While all platforms provide mostly the same functionality, there are some variations around how different bus types are handled. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga4c530814a371c788f9608e46b81feb93"></a><!-- doxytag: member="sysclk.h::SYSCLK_ADC" ref="ga4c530814a371c788f9608e46b81feb93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_ADC&nbsp;&nbsp;&nbsp;0x0001</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A/D Converter. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00050">50</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4941f8bf9c260e3d982e281fd463fe26"></a><!-- doxytag: member="sysclk.h::SYSCLK_SPI" ref="ga4941f8bf9c260e3d982e281fd463fe26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_SPI&nbsp;&nbsp;&nbsp;0x0004</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>SPI controller. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00051">51</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

<p>Referenced by <a class="el" href="spi__mega_8h_source.html#l00091">spi_priv_disable()</a>, and <a class="el" href="spi__mega_8h_source.html#l00085">spi_priv_enable()</a>.</p>

</div>
</div>
<a class="anchor" id="gabe7aa477c7c5b3887df1d762a750b04a"></a><!-- doxytag: member="sysclk.h::SYSCLK_TC0" ref="gabe7aa477c7c5b3887df1d762a750b04a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_TC0&nbsp;&nbsp;&nbsp;0x0020</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer/Counter 0. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00053">53</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga03be785696a3e76b1b3c6ea6104ac630"></a><!-- doxytag: member="sysclk.h::SYSCLK_TC1" ref="ga03be785696a3e76b1b3c6ea6104ac630" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_TC1&nbsp;&nbsp;&nbsp;0x0008</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer/Counter 1. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00052">52</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacff12dc14a3213e65aadbc4840b0d4ba"></a><!-- doxytag: member="sysclk.h::SYSCLK_TC2" ref="gacff12dc14a3213e65aadbc4840b0d4ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_TC2&nbsp;&nbsp;&nbsp;0x0040</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer/Counter 2. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00054">54</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga76e33427b97ac7e4aba29604e5d58a45"></a><!-- doxytag: member="sysclk.h::SYSCLK_TC3" ref="ga76e33427b97ac7e4aba29604e5d58a45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_TC3&nbsp;&nbsp;&nbsp;0x0108</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer/counter 3. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00059">59</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae6761c065555d454a6e104909f151289"></a><!-- doxytag: member="sysclk.h::SYSCLK_TWI" ref="gae6761c065555d454a6e104909f151289" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_TWI&nbsp;&nbsp;&nbsp;0x0080</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TWI controller. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00055">55</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1acb0cc02d975a6d9d4e92e56a2438a0"></a><!-- doxytag: member="sysclk.h::SYSCLK_USART1" ref="ga1acb0cc02d975a6d9d4e92e56a2438a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_USART1&nbsp;&nbsp;&nbsp;0x0101</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>USART 1 replicated due to chip naming convention */. </p>
<p>USART 1 </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00056">56</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0acdf4ca4b306373eb79b5fbc7409be7"></a><!-- doxytag: member="sysclk.h::SYSCLK_USB" ref="ga0acdf4ca4b306373eb79b5fbc7409be7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSCLK_USB&nbsp;&nbsp;&nbsp;0x0180</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>USB controller. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00060">60</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

<p>Referenced by <a class="el" href="at90usb__core_8c_source.html#l00336">at90usb_init()</a>, <a class="el" href="sysclk_8h_source.html#l00099">sysclk_disable_module()</a>, and <a class="el" href="sysclk_8h_source.html#l00077">sysclk_enable_module()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga5aa49263d2aff11ed805d9b1f6688c1a"></a><!-- doxytag: member="sysclk.h::sysclk_disable_module" ref="ga5aa49263d2aff11ed805d9b1f6688c1a" args="(uint16_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void sysclk_disable_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable a module clock derived from the system clock. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The ID of the module clock to be disabled (e.g. <a class="el" href="group__sysclk__group.html#ga1acb0cc02d975a6d9d4e92e56a2438a0" title="USART 1 replicated due to chip naming convention */.">SYSCLK_USART1</a> to disable the second USART.) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00099">99</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, and <a class="el" href="sysclk_8h_source.html#l00060">SYSCLK_USB</a>.</p>

<p>Referenced by <a class="el" href="spi__mega_8h_source.html#l00091">spi_priv_disable()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6e9d5c5dc25b65c71fc5dc271cfbe94b"></a><!-- doxytag: member="sysclk.h::sysclk_enable_module" ref="ga6e9d5c5dc25b65c71fc5dc271cfbe94b" args="(uint16_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void sysclk_enable_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable a module clock derived from the system clock. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The ID of the module clock to be enabled (e.g. <a class="el" href="group__sysclk__group.html#ga1acb0cc02d975a6d9d4e92e56a2438a0" title="USART 1 replicated due to chip naming convention */.">SYSCLK_USART1</a> to enable the second USART.) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00077">77</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, and <a class="el" href="sysclk_8h_source.html#l00060">SYSCLK_USB</a>.</p>

<p>Referenced by <a class="el" href="at90usb__core_8c_source.html#l00336">at90usb_init()</a>, and <a class="el" href="spi__mega_8h_source.html#l00085">spi_priv_enable()</a>.</p>

</div>
</div>
<a class="anchor" id="ga242399e48a97739c88b4d0c00f6101de"></a><!-- doxytag: member="sysclk.h::sysclk_init" ref="ga242399e48a97739c88b4d0c00f6101de" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysclk_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the synchronous clock system. </p>
<p>This function will mask all synchronous clocks except for any clocks which are essential for normal operation (for example internal memory clocks). Peripheral clocks must be re-enabled before use by the peripheral driver. </p>

<p>Definition at line <a class="el" href="sysclk_8h_source.html#l00118">118</a> of file <a class="el" href="sysclk_8h_source.html">sysclk.h</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00148">main()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:35 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
