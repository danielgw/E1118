<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: Generic Buffers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Generic Buffers</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbuffer.html">buffer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A generic data buffer.  <a href="structbuffer.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga08e06f378926444e51a796c70ab9037b">buffer_init_tx</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf, const void *data, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a buffer for transmitting data.  <a href="#ga08e06f378926444e51a796c70ab9037b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga717929837d4f4ba917aee09943a35263">buffer_init_tx_mapped</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf, <a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize an already-DMA-mapped buffer for transmitting data.  <a href="#ga717929837d4f4ba917aee09943a35263"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga2ffe6d12dbb8f75d7649a258350245df">buffer_init_rx</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf, void *data, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a buffer for receiving data.  <a href="#ga2ffe6d12dbb8f75d7649a258350245df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga48a5f5cf02679d5f06e8a709b0e1d987">buffer_init_rx_mapped</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf, <a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize an already-DMA-mapped buffer for receiving data.  <a href="#ga48a5f5cf02679d5f06e8a709b0e1d987"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#gaab157b752eee37551d569241b272cfba">buffer_alloc</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate a buffer structure.  <a href="#gaab157b752eee37551d569241b272cfba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga892382a3cd2784fff8946f734d732de6">buffer_free</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the buffer structure <em>buf</em>.  <a href="#ga892382a3cd2784fff8946f734d732de6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga7d7894a1f84fcf9a2d1f2f1a6f3ed133">buffer_resize</a> (struct <a class="el" href="structbuffer.html">buffer</a> *buf, size_t new_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resize the buffer pointed to by <em>buf</em>. The caller must make sure the new size fit into the allocated memory space.  <a href="#ga7d7894a1f84fcf9a2d1f2f1a6f3ed133"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga166693a353ade29b052780ed6763d3fa">buffer_pool_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the buffer pool.  <a href="#ga166693a353ade29b052780ed6763d3fa"></a><br/></td></tr>
<tr><td colspan="2"><h2>Buffer List Manipulation</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp3e018e3ff1922d0b8d61a55d9b68bc31"></a> The following macros are simple wrappers around the generic singly-linked-list functionality designed to make it easier to operate on singly linked lists of buffers (which is a very common thing to put on singly linked lists). </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#gae9718a4ad812e47a4b9c3927cab55e79">buf_list_entry</a>(slnode)&nbsp;&nbsp;&nbsp;slist_entry(slnode, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a slist node to a buffer struct.  <a href="#gae9718a4ad812e47a4b9c3927cab55e79"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga0e091c061e88c6c38a6f92c1dd2b5671">buf_list_peek_head</a>(list)&nbsp;&nbsp;&nbsp;slist_peek_head(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first buffer in <em>list</em>.  <a href="#ga0e091c061e88c6c38a6f92c1dd2b5671"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#gab98e2fd529da6cfe6d842a0666bd2894">buf_list_peek_tail</a>(list)&nbsp;&nbsp;&nbsp;slist_peek_tail(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the last buffer in <em>list</em>.  <a href="#gab98e2fd529da6cfe6d842a0666bd2894"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga8439b1a668345115c12517872dbc1012">buf_list_peek_next</a>(buf)&nbsp;&nbsp;&nbsp;slist_peek_next(&amp;(buf)-&gt;node, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the buffer following <em>buf</em> in the list.  <a href="#ga8439b1a668345115c12517872dbc1012"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer__group.html#ga204cf3ab1d8dc73993f3d68c08743bee">buf_list_pop_head</a>(list)&nbsp;&nbsp;&nbsp;slist_pop_head(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first buffer in <em>list</em> and remove it.  <a href="#ga204cf3ab1d8dc73993f3d68c08743bee"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This is a generic buffer data structure used by several subsystems. Chains of buffers may be passed around between different drivers, minimizing the cost of copying and data conversion. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gae9718a4ad812e47a4b9c3927cab55e79"></a><!-- doxytag: member="buffer.h::buf_list_entry" ref="gae9718a4ad812e47a4b9c3927cab55e79" args="(slnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_list_entry</td>
          <td>(</td>
          <td class="paramtype">slnode&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;slist_entry(slnode, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert a slist node to a buffer struct. </p>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00145">145</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e091c061e88c6c38a6f92c1dd2b5671"></a><!-- doxytag: member="buffer.h::buf_list_peek_head" ref="ga0e091c061e88c6c38a6f92c1dd2b5671" args="(list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_list_peek_head</td>
          <td>(</td>
          <td class="paramtype">list&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;slist_peek_head(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the first buffer in <em>list</em>. </p>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00148">148</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8439b1a668345115c12517872dbc1012"></a><!-- doxytag: member="buffer.h::buf_list_peek_next" ref="ga8439b1a668345115c12517872dbc1012" args="(buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_list_peek_next</td>
          <td>(</td>
          <td class="paramtype">buf&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;slist_peek_next(&amp;(buf)-&gt;node, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the buffer following <em>buf</em> in the list. </p>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00154">154</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab98e2fd529da6cfe6d842a0666bd2894"></a><!-- doxytag: member="buffer.h::buf_list_peek_tail" ref="gab98e2fd529da6cfe6d842a0666bd2894" args="(list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_list_peek_tail</td>
          <td>(</td>
          <td class="paramtype">list&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;slist_peek_tail(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the last buffer in <em>list</em>. </p>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00151">151</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga204cf3ab1d8dc73993f3d68c08743bee"></a><!-- doxytag: member="buffer.h::buf_list_pop_head" ref="ga204cf3ab1d8dc73993f3d68c08743bee" args="(list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define buf_list_pop_head</td>
          <td>(</td>
          <td class="paramtype">list&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;slist_pop_head(list, struct <a class="el" href="structbuffer.html">buffer</a>, node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the first buffer in <em>list</em> and remove it. </p>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00157">157</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

<p>Referenced by <a class="el" href="udc__lib_8h_source.html#l00257">udc_fifo_read_data()</a>, and <a class="el" href="udc__lib_8h_source.html#l00183">udc_fifo_write_data()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaab157b752eee37551d569241b272cfba"></a><!-- doxytag: member="buffer.h::buffer_alloc" ref="gaab157b752eee37551d569241b272cfba" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbuffer.html">buffer</a>* buffer_alloc </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate a buffer structure. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A new buffer structure, or NULL if the buffer pool is exhausted. </dd></dl>

<p>Definition at line <a class="el" href="buffer_8c_source.html#l00049">49</a> of file <a class="el" href="buffer_8c_source.html">buffer.c</a>.</p>

<p>References <a class="el" href="buffer_8h_source.html#l00063">buffer::dma_desc</a>, and <a class="el" href="group__mempool__group.html#ga5e7c4701fb65890927dc29ae4ee5e5c4">mem_pool_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga892382a3cd2784fff8946f734d732de6"></a><!-- doxytag: member="buffer.h::buffer_free" ref="ga892382a3cd2784fff8946f734d732de6" args="(struct buffer *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buffer_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free the buffer structure <em>buf</em>. </p>

<p>Definition at line <a class="el" href="buffer_8c_source.html#l00062">62</a> of file <a class="el" href="buffer_8c_source.html">buffer.c</a>.</p>

<p>References <a class="el" href="group__mempool__group.html#gacf196ba6a68124e0560662840fa8b113">mem_pool_free()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2ffe6d12dbb8f75d7649a258350245df"></a><!-- doxytag: member="buffer.h::buffer_init_rx" ref="ga2ffe6d12dbb8f75d7649a258350245df" args="(struct buffer *buf, void *data, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void buffer_init_rx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a buffer for receiving data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data area to associate with the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the data area in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00106">106</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

<p>References <a class="el" href="buffer_8h_source.html#l00065">buffer::addr</a>, <a class="el" href="include_2dma_8h_source.html#l00134">DMA_FROM_DEVICE</a>, <a class="el" href="dma__nommu_8h_source.html#l00135">dma_map_single()</a>, and <a class="el" href="buffer_8h_source.html#l00067">buffer::len</a>.</p>

</div>
</div>
<a class="anchor" id="ga48a5f5cf02679d5f06e8a709b0e1d987"></a><!-- doxytag: member="buffer.h::buffer_init_rx_mapped" ref="ga48a5f5cf02679d5f06e8a709b0e1d987" args="(struct buffer *buf, dma_addr_t addr, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void buffer_init_rx_mapped </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize an already-DMA-mapped buffer for receiving data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>Physical/virtual address of the data DMA mapping </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the data area in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00119">119</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

<p>References <a class="el" href="buffer_8h_source.html#l00065">buffer::addr</a>, and <a class="el" href="buffer_8h_source.html#l00067">buffer::len</a>.</p>

</div>
</div>
<a class="anchor" id="ga08e06f378926444e51a796c70ab9037b"></a><!-- doxytag: member="buffer.h::buffer_init_tx" ref="ga08e06f378926444e51a796c70ab9037b" args="(struct buffer *buf, const void *data, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void buffer_init_tx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a buffer for transmitting data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data area to associate with the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the data area in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00078">78</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

<p>References <a class="el" href="buffer_8h_source.html#l00065">buffer::addr</a>, <a class="el" href="dma__nommu_8h_source.html#l00135">dma_map_single()</a>, <a class="el" href="include_2dma_8h_source.html#l00135">DMA_TO_DEVICE</a>, and <a class="el" href="buffer_8h_source.html#l00067">buffer::len</a>.</p>

</div>
</div>
<a class="anchor" id="ga717929837d4f4ba917aee09943a35263"></a><!-- doxytag: member="buffer.h::buffer_init_tx_mapped" ref="ga717929837d4f4ba917aee09943a35263" args="(struct buffer *buf, dma_addr_t addr, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void buffer_init_tx_mapped </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize an already-DMA-mapped buffer for transmitting data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>Physical/virtual address of the data DMA mapping </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the data area in bytes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buffer_8h_source.html#l00093">93</a> of file <a class="el" href="buffer_8h_source.html">buffer.h</a>.</p>

<p>References <a class="el" href="buffer_8h_source.html#l00065">buffer::addr</a>, and <a class="el" href="buffer_8h_source.html#l00067">buffer::len</a>.</p>

</div>
</div>
<a class="anchor" id="ga166693a353ade29b052780ed6763d3fa"></a><!-- doxytag: member="buffer.h::buffer_pool_init" ref="ga166693a353ade29b052780ed6763d3fa" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buffer_pool_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the buffer pool. </p>
<p>This must be called by the application before any buffers may be allocated from the pool. </p>

<p>Definition at line <a class="el" href="buffer_8c_source.html#l00129">129</a> of file <a class="el" href="buffer_8c_source.html">buffer.c</a>.</p>

<p>References <a class="el" href="physmem__pools_8c_source.html#l00048">cpu_sram_pool</a>, and <a class="el" href="group__mempool__group.html#ga9cfe0b11ce6861f8b0e2d32c8bf91299">mem_pool_init_physmem()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00148">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7d7894a1f84fcf9a2d1f2f1a6f3ed133"></a><!-- doxytag: member="buffer.h::buffer_resize" ref="ga7d7894a1f84fcf9a2d1f2f1a6f3ed133" args="(struct buffer *buf, size_t new_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buffer_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbuffer.html">buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resize the buffer pointed to by <em>buf</em>. The caller must make sure the new size fit into the allocated memory space. </p>

<p>Definition at line <a class="el" href="buffer_8c_source.html#l00071">71</a> of file <a class="el" href="buffer_8c_source.html">buffer.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, and <a class="el" href="buffer_8h_source.html#l00067">buffer::len</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:34 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
