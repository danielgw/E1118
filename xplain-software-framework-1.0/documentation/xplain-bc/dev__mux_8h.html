<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xplain-bc: include/usb/dev_mux.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/usb/dev_mux.h File Reference</h1>
<p>USB device multiplexing layer.  
<a href="#_details">More...</a></p>
<code>#include &lt;<a class="el" href="buffer_8h_source.html">buffer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="usb__protocol_8h_source.html">usb/usb_protocol.h</a>&gt;</code><br/>

<p><a href="dev__mux_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structudm__interface.html">udm_interface</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A USB device interface.  <a href="structudm__interface.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structudm__config.html">udm_config</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A USB device configuration.  <a href="structudm__config.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Configuration Management</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpa4934331bbf896399132d3d20f141ef3"></a> The following functions may be called by the application to create configurations and associate interfaces with them. The interface objects are typically returned by the initialization function of a USB Device Interface Driver.</p>
<p><a class="el" href="group__usb__dev__mux.html#gaa323d6f0a542bd5e611634e89d0852b8" title="Create a new USB device configuration.">udm_create_config()</a> returns a configuration object which can be passed as a parameter to the other configuration management functions. The configuration descriptor is managed by the UDM layer, but the application may alter certain fields by calling <a class="el" href="group__usb__dev__mux.html#ga97ed794f81c25ad0fbf4176816ec1984" title="Mark a configuration as self-powered.">udm_config_set_self_powered()</a>, <a class="el" href="group__usb__dev__mux.html#ga4e984caec69fa2faf55aa481afd92d56" title="Mark a configuration as bus-powered.">udm_config_set_bus_powered()</a>, and <a class="el" href="group__usb__dev__mux.html#ga665de55fcf0adbbb1b12a8ddaa313f04" title="Set the maximum power consumption of a configuration.">udm_config_set_max_power()</a>. The application must not create more than one configuration with a given value, and it must not attempt to create more configurations than specified by APP_USB_DEVICE_NR_CONFIGS. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structudm__config.html">udm_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#gaa323d6f0a542bd5e611634e89d0852b8">udm_create_config</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> value, <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> nr_interfaces)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new USB device configuration.  <a href="group__usb__dev__mux.html#gaa323d6f0a542bd5e611634e89d0852b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#ga297f1a697e4aa8f4f8d450864b670165">udm_config_add_interface</a> (struct <a class="el" href="structudm__config.html">udm_config</a> *config, struct <a class="el" href="structudm__interface.html">udm_interface</a> *iface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add an interface to a configuration.  <a href="group__usb__dev__mux.html#ga297f1a697e4aa8f4f8d450864b670165"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#ga665de55fcf0adbbb1b12a8ddaa313f04">udm_config_set_max_power</a> (struct <a class="el" href="structudm__config.html">udm_config</a> *config, unsigned int milliamps)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the maximum power consumption of a configuration.  <a href="group__usb__dev__mux.html#ga665de55fcf0adbbb1b12a8ddaa313f04"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#ga97ed794f81c25ad0fbf4176816ec1984">udm_config_set_self_powered</a> (struct <a class="el" href="structudm__config.html">udm_config</a> *config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark a configuration as self-powered.  <a href="group__usb__dev__mux.html#ga97ed794f81c25ad0fbf4176816ec1984"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#ga4e984caec69fa2faf55aa481afd92d56">udm_config_set_bus_powered</a> (struct <a class="el" href="structudm__config.html">udm_config</a> *config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark a configuration as bus-powered.  <a href="group__usb__dev__mux.html#ga4e984caec69fa2faf55aa481afd92d56"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">USB String Descriptor Support</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp062edacc2ae12b10858c113258171028"></a> The following functions may be used by the application to implement support for USB string descriptors. Such descriptors are optional according to the USB spec, so by default, all string descriptor requests are rejected.</p>
<p>To support string descriptors, the application must implement the function <a class="el" href="group__usb__dev__mux.html#ga20b4a9a7aedc6b7c1748b2a5dc9a809d" title="Application-specific hook for retrieving a USB String descriptor.">app_usb_get_string_descriptor()</a> and provide a preprocessor define named <code>HAVE_APP_USB_GET_STRING_DESCRIPTOR</code> (which will disable the default implementation). </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#ga0cc47e29580273c6b6431ef287bdec51">udm_submit_ascii_string_desc</a> (struct <a class="el" href="structudc.html">udc</a> *<a class="el" href="structudc.html">udc</a>, struct <a class="el" href="structusb__request.html">usb_request</a> *req, const char *str, <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> max_len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a string descriptor buffer initialized from an 8-bit ASCII encoded string.  <a href="group__usb__dev__mux.html#ga0cc47e29580273c6b6431ef287bdec51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__dev__mux.html#gad6724e2a44b60605562e1b9e17717fbb">udm_submit_utf16le_string_desc</a> (struct <a class="el" href="structudc.html">udc</a> *<a class="el" href="structudc.html">udc</a>, struct <a class="el" href="structusb__request.html">usb_request</a> *req, const <a class="el" href="types_8h.html#a467964c91885f34b69185f7356842d70">le16_t</a> *str, <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> max_len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a string descriptor buffer initialized from a UTF-16LE encoded string.  <a href="group__usb__dev__mux.html#gad6724e2a44b60605562e1b9e17717fbb"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>USB device multiplexing layer. </p>
<p>Copyright (C) 2009 Atmel Corporation. All rights reserved. </p>

<p>Definition in file <a class="el" href="dev__mux_8h_source.html">dev_mux.h</a>.</p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:34 2010 for xplain-bc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
