<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: include/flash/at45.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/flash/at45.h</h1><a href="at45_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef FLASH_AT45_H_INCLUDED</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define FLASH_AT45_H_INCLUDED</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="group__at45__flash__group.html#ga2d9a4bb259fdec3d1dca771bc9c9b67a">00065</a> <span class="preprocessor">#define AT45_PS_256     (0 &lt;&lt; 0) //!&lt; Page size 256 bytes</span>
<a name="l00066"></a><a class="code" href="group__at45__flash__group.html#ga15adfc21858243866f08dfdca5779fdf">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_PS_512     (1 &lt;&lt; 0) //!&lt; Page size 512 bytes</span>
<a name="l00067"></a><a class="code" href="group__at45__flash__group.html#ga6560aca17007b2a82910cda16a915f04">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_PS_1024    (2 &lt;&lt; 0) //!&lt; Page size 1024 bytes</span>
<a name="l00068"></a><a class="code" href="group__at45__flash__group.html#ga856edfea1f82c495d5d38a36d726947d">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_PS_MASK    (7 &lt;&lt; 0) //!&lt; Page size mask bits</span>
<a name="l00069"></a><a class="code" href="group__at45__flash__group.html#ga92ee72a6dafc62e8bc69f56dd15585a3">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_SS_128P    (0 &lt;&lt; 3) //!&lt; Sector size 128 pages</span>
<a name="l00070"></a><a class="code" href="group__at45__flash__group.html#ga3707b23ce7eb9fcf93991b331c15e646">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_SS_256P    (1 &lt;&lt; 3) //!&lt; Sector size 256 bytes</span>
<a name="l00071"></a><a class="code" href="group__at45__flash__group.html#ga9fa125c48f36830d96d659f383d0e029">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_SS_MASK    (3 &lt;&lt; 3) //!&lt; Sector size mask bits</span>
<a name="l00072"></a><a class="code" href="group__at45__flash__group.html#gae1f2ab1a9286ebe7482efce4db726aa6">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_4S      (0 &lt;&lt; 4) //!&lt; Device size 4 sectors</span>
<a name="l00073"></a><a class="code" href="group__at45__flash__group.html#gad4e463900a91e7c074382ffc3814a81d">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_8S      (1 &lt;&lt; 4) //!&lt; Device size 8 sectors</span>
<a name="l00074"></a><a class="code" href="group__at45__flash__group.html#ga3c331098b3944bca7417c4fd8af55658">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_16S     (2 &lt;&lt; 4) //!&lt; Device size 16 sectors</span>
<a name="l00075"></a><a class="code" href="group__at45__flash__group.html#ga51c7b8e779c2088300f9b49effa61cc8">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_32S     (3 &lt;&lt; 4) //!&lt; Device size 32 sectors</span>
<a name="l00076"></a><a class="code" href="group__at45__flash__group.html#gaf0a53a68683f6baaa91a9ba197cb3a6d">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_64S     (4 &lt;&lt; 4) //!&lt; Device size 64 sectors</span>
<a name="l00077"></a><a class="code" href="group__at45__flash__group.html#gab02cf5c9ce438bdda069dd9a005459d6">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define AT45_DS_MASK    (7 &lt;&lt; 4) //!&lt; Device size mask bits</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="group__at45__flash__group.html#ga43761cb0eff441230f3a6a0fe130c6c5">00088</a> <span class="preprocessor">#define AT45DB011D      (AT45_PS_256 | AT45_SS_128P | AT45_DS_4S)</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="group__at45__flash__group.html#ga90d522b48c305af5feb51fc099e87823">00090</a> <span class="preprocessor">#define AT45DB021D      (AT45_PS_256 | AT45_SS_128P | AT45_DS_8S)</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="group__at45__flash__group.html#ga7ff268f8b4fe064268b188bdd68e56d0">00092</a> <span class="preprocessor">#define AT45DB041D      (AT45_PS_256 | AT45_SS_256P | AT45_DS_8S)</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00094"></a><a class="code" href="group__at45__flash__group.html#gac48227f740664074e3665be72619320b">00094</a> <span class="preprocessor">#define AT45DB081D      (AT45_PS_256 | AT45_SS_256P | AT45_DS_16S)</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span>
<a name="l00096"></a><a class="code" href="group__at45__flash__group.html#ga0e78c4a8a6f710fd67eac2b31bcc1811">00096</a> <span class="preprocessor">#define AT45DB161D      (AT45_PS_512 | AT45_SS_256P | AT45_DS_16S)</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>
<a name="l00098"></a><a class="code" href="group__at45__flash__group.html#gaa1a3136db0b4cca02340e646b792300a">00098</a> <span class="preprocessor">#define AT45DB321D      (AT45_PS_512 | AT45_SS_128P | AT45_DS_64S)</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="group__at45__flash__group.html#ga48a474992f2f0ea9d945b9129e8708ce">00100</a> <span class="preprocessor">#define AT45DB642D      (AT45_PS_1024 | AT45_SS_256P | AT45_DS_32S)</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="group__at45__flash__group.html#ga105c76f6ba89e149c6c0728be5d074c1">00104</a> <span class="keyword">enum</span> <a class="code" href="group__at45__flash__group.html#ga105c76f6ba89e149c6c0728be5d074c1" title="AT45 Commands.">at45_cmd</a> {
<a name="l00106"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1ace15c54ad7cc31bd37fa8c70ce8acdc2">00106</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1ace15c54ad7cc31bd37fa8c70ce8acdc2" title="Read continous data.">AT45_CMD_CONTINOUS_ARRAY_READ</a>                    = 0x0b,
<a name="l00108"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a3368d017e63d6358edd130537578f72f">00108</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a3368d017e63d6358edd130537578f72f" title="Transfer from flash to buffer 1.">AT45_CMD_MAIN_MEMORY_TO_BUFFER_1_TRANSFER</a>        = 0x53,
<a name="l00110"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1aed0a94369b8ac2cbeb25089947c7b918">00110</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1aed0a94369b8ac2cbeb25089947c7b918" title="Program buffer 1 into flash with built-in erase.">AT45_CMD_BUFFER_1_MAIN_MEMORY_PROGRAM_WITH_ERASE</a> = 0x83,
<a name="l00112"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a7c8f81eb444c3bd6741c6d7cc551dc4a">00112</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a7c8f81eb444c3bd6741c6d7cc551dc4a" title="Write to buffer 1.">AT45_CMD_BUFFER_1_WRITE</a>                          = 0x84,
<a name="l00114"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1aff9a964783f27290870132ee9e3d6452">00114</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1aff9a964783f27290870132ee9e3d6452" title="Read manufacturer and device ID.">AT45_CMD_READ_ID</a>                                 = 0x9f,
<a name="l00116"></a><a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a084a46938dd248dcf6bd259b3bfad40e">00116</a>         <a class="code" href="group__at45__flash__group.html#gga105c76f6ba89e149c6c0728be5d074c1a084a46938dd248dcf6bd259b3bfad40e" title="Read status register.">AT45_CMD_READ_STATUS_REG</a>                         = 0xd7,
<a name="l00117"></a>00117 };
<a name="l00118"></a>00118 
<a name="l00120"></a><a class="code" href="group__at45__flash__group.html#ga9b51803a6eeff85cacbe0dde8e480c64">00120</a> <span class="keyword">enum</span> <a class="code" href="group__at45__flash__group.html#ga9b51803a6eeff85cacbe0dde8e480c64" title="AT45 status register bits.">at45_status_bit</a> {
<a name="l00121"></a><a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64acf045a76aff10a758c846caae2922fa4">00121</a>         <a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64acf045a76aff10a758c846caae2922fa4" title="Page size (1: power-of-2 size).">AT45_STATUS_PAGE_SIZE</a> = 0, 
<a name="l00122"></a><a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64ae2cd46dc6392fa3feb6c75c253d73396">00122</a>         <a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64ae2cd46dc6392fa3feb6c75c253d73396" title="Sector protection.">AT45_STATUS_PROTECT</a>   = 1, 
<a name="l00123"></a><a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64a3f761678813f92812d8283d07e80547c">00123</a>         <a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64a3f761678813f92812d8283d07e80547c" title="Result of compare operation.">AT45_STATUS_COMP</a>      = 6, 
<a name="l00124"></a><a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64ace83474ade6ff6f1a305d137dbf42a27">00124</a>         <a class="code" href="group__at45__flash__group.html#gga9b51803a6eeff85cacbe0dde8e480c64ace83474ade6ff6f1a305d137dbf42a27" title="Ready for next command.">AT45_STATUS_RDY</a>       = 7, 
<a name="l00125"></a>00125 };
<a name="l00126"></a>00126 
<a name="l00128"></a><a class="code" href="group__at45__flash__group.html#gab288e573e092e0b4ae4f4bd1c7993225">00128</a> <span class="preprocessor">#define AT45_PAGE_ADDR_MASK             ((1 &lt;&lt; 13) - 1)</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span>
<a name="l00131"></a><a class="code" href="group__at45__flash__group.html#ga84d2a73c54fee2964959968ba9188735">00131</a> <span class="preprocessor">#define AT45_PAGE_POS_MASK              ((1 &lt;&lt; 11) - 1)</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span>
<a name="l00134"></a><a class="code" href="group__at45__flash__group.html#ga7d76e85039917305be3a76c0afe916fd">00134</a> <span class="preprocessor">#define AT45_ATMEL_JEDEC_ID             0x1f</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00137"></a><a class="code" href="group__at45__flash__group.html#gabf230d2593aad402492c99ccc4acc7b2">00137</a> <span class="preprocessor">#define AT45_DATAFLASH_FAMILY_CODE      0x20</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>
<a name="l00140"></a><a class="code" href="group__at45__flash__group.html#gadd20b5de847335f3bce287fc6c11548f">00140</a> <span class="preprocessor">#define AT45_FAMILY_CODE_MASK           0xe0</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00143"></a><a class="code" href="group__at45__flash__group.html#gacc663ffc60969930bb054de730783dc4">00143</a> <span class="preprocessor">#define AT45_DENSITY_CODE_MIN           2</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>
<a name="l00146"></a><a class="code" href="group__at45__flash__group.html#ga10d94eff05c7b8700168dd65f39c6d25">00146</a> <span class="preprocessor">#define AT45_DENSITY_CODE_MAX           8</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>
<a name="l00149"></a><a class="code" href="group__at45__flash__group.html#ga56f763f1c4f365bc88c39843e90f74a4">00149</a> <span class="preprocessor">#define AT45_DENSITY_CODE_MASK          0x1f</span>
<a name="l00150"></a>00150 <span class="preprocessor"></span>
<a name="l00158"></a><a class="code" href="group__at45__flash__group.html#gac4ca8ccd25c571d19f3c49a3ef037265">00158</a> <span class="preprocessor">#define AT45_DENSITY_CODE_0_DEVICE_SIZE 0x8000L</span>
<a name="l00159"></a>00159 <span class="preprocessor"></span>
<a name="l00161"></a><a class="code" href="group__at45__flash__group.html#ga60a9c1eb09ba3849e29d2188ddfeed21">00161</a> <span class="preprocessor">#define AT45_PAGE_SIZE_ID_0_SIZE        256</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>
<a name="l00169"></a><a class="code" href="group__at45__flash__group.html#ga82cba3b67768162e8194ee6804e59330">00169</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> <a class="code" href="group__at45__flash__group.html#ga82cba3b67768162e8194ee6804e59330" title="AT45 density code to device size information translation table.">at45_density_table</a>[] = {
<a name="l00170"></a>00170         [2] = <a class="code" href="group__at45__flash__group.html#ga43761cb0eff441230f3a6a0fe130c6c5" title="Size definitions for AT45DB011D.">AT45DB011D</a>,
<a name="l00171"></a>00171         [3] = <a class="code" href="group__at45__flash__group.html#ga90d522b48c305af5feb51fc099e87823" title="Size definitions for AT45DB021D.">AT45DB021D</a>,
<a name="l00172"></a>00172         [4] = <a class="code" href="group__at45__flash__group.html#ga7ff268f8b4fe064268b188bdd68e56d0" title="Size definitions for AT45DB031D.">AT45DB041D</a>,
<a name="l00173"></a>00173         [5] = <a class="code" href="group__at45__flash__group.html#gac48227f740664074e3665be72619320b" title="Size definitions for AT45DB081D.">AT45DB081D</a>,
<a name="l00174"></a>00174         [6] = <a class="code" href="group__at45__flash__group.html#ga0e78c4a8a6f710fd67eac2b31bcc1811" title="Size definitions for AT45DB161D.">AT45DB161D</a>,
<a name="l00175"></a>00175         [7] = <a class="code" href="group__at45__flash__group.html#gaa1a3136db0b4cca02340e646b792300a" title="Size definitions for AT45DB321D.">AT45DB321D</a>,
<a name="l00176"></a>00176         [8] = <a class="code" href="group__at45__flash__group.html#ga48a474992f2f0ea9d945b9129e8708ce" title="Size definitions for AT45DB641D.">AT45DB642D</a>,
<a name="l00177"></a>00177 };
<a name="l00178"></a>00178 
<a name="l00186"></a><a class="code" href="group__at45__flash__group.html#ga92bcc15d4d325ff21b7d0fee33ca3686">00186</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__at45__flash__group.html#ga92bcc15d4d325ff21b7d0fee33ca3686" title="Test if AT45 mamufacturer ID is Atmel&amp;#39;s.">at45_is_atmel_jedec_id</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> manuf_id)
<a name="l00187"></a>00187 {
<a name="l00188"></a>00188         <span class="keywordflow">return</span> manuf_id == <a class="code" href="group__at45__flash__group.html#ga7d76e85039917305be3a76c0afe916fd" title="Atmel AT45 JEDEC ID.">AT45_ATMEL_JEDEC_ID</a>;
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00198"></a><a class="code" href="group__at45__flash__group.html#gab8793cf68e5a0a23ab3849c76956f68d">00198</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__at45__flash__group.html#gab8793cf68e5a0a23ab3849c76956f68d" title="Test if AT45 device ID is DataFlash family.">at45_is_dataflash_family_code</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200         <span class="keywordflow">return</span> (device_id1 &amp; <a class="code" href="group__at45__flash__group.html#gadd20b5de847335f3bce287fc6c11548f" title="Mask for AT45 family code.">AT45_FAMILY_CODE_MASK</a>)
<a name="l00201"></a>00201                         == <a class="code" href="group__at45__flash__group.html#gabf230d2593aad402492c99ccc4acc7b2" title="DataFlash familty code.">AT45_DATAFLASH_FAMILY_CODE</a>;
<a name="l00202"></a>00202 }
<a name="l00203"></a>00203 
<a name="l00210"></a><a class="code" href="group__at45__flash__group.html#ga8bff1db9428e9a19474ce85690fb3920">00210</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> <a class="code" href="group__at45__flash__group.html#ga8bff1db9428e9a19474ce85690fb3920" title="Get AT45 density code from Device ID 1.">at45_get_density_code</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212         <span class="keywordflow">return</span> device_id1 &amp; <a class="code" href="group__at45__flash__group.html#ga56f763f1c4f365bc88c39843e90f74a4" title="Mask for AT45 density code.">AT45_DENSITY_CODE_MASK</a>;
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00222"></a><a class="code" href="group__at45__flash__group.html#gac5c62a9ae83415a832874372343c6581">00222</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__at45__flash__group.html#gac5c62a9ae83415a832874372343c6581" title="Test if AT45 device ID have a valid density code.">at45_is_valid_density_code</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> density_code = <a class="code" href="group__at45__flash__group.html#ga8bff1db9428e9a19474ce85690fb3920" title="Get AT45 density code from Device ID 1.">at45_get_density_code</a>(device_id1);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226         <span class="keywordflow">return</span> (density_code &gt;= <a class="code" href="group__at45__flash__group.html#gacc663ffc60969930bb054de730783dc4" title="Minimum AT45 density code.">AT45_DENSITY_CODE_MIN</a>)
<a name="l00227"></a>00227                         &amp;&amp; (density_code &lt;= <a class="code" href="group__at45__flash__group.html#ga10d94eff05c7b8700168dd65f39c6d25" title="Maximum AT45 density code.">AT45_DENSITY_CODE_MAX</a>);
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00238"></a><a class="code" href="group__at45__flash__group.html#gad5f911b1dd8350e559ba9d3f5a76ee95">00238</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__at45__flash__group.html#gad5f911b1dd8350e559ba9d3f5a76ee95" title="Test if AT45 device ID is DataFlash family.">at45_is_valid_id</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> manuf_id, <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240         <span class="keywordflow">return</span> <a class="code" href="group__at45__flash__group.html#ga92bcc15d4d325ff21b7d0fee33ca3686" title="Test if AT45 mamufacturer ID is Atmel&amp;#39;s.">at45_is_atmel_jedec_id</a>(manuf_id)
<a name="l00241"></a>00241                         &amp;&amp; <a class="code" href="group__at45__flash__group.html#gab8793cf68e5a0a23ab3849c76956f68d" title="Test if AT45 device ID is DataFlash family.">at45_is_dataflash_family_code</a>(device_id1)
<a name="l00242"></a>00242                         &amp;&amp; <a class="code" href="group__at45__flash__group.html#gac5c62a9ae83415a832874372343c6581" title="Test if AT45 device ID have a valid density code.">at45_is_valid_density_code</a>(device_id1);
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00251"></a><a class="code" href="group__at45__flash__group.html#ga9a8ce987a24aaff665f50953f729d042">00251</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__at45__flash__group.html#ga9a8ce987a24aaff665f50953f729d042" title="Get AT45 device size from Device ID 1.">at45_get_size</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253         <span class="comment">// Every step up in density code doubles the size so just shift it</span>
<a name="l00254"></a>00254         <span class="keywordflow">return</span> <a class="code" href="group__at45__flash__group.html#gac4ca8ccd25c571d19f3c49a3ef037265" title="The device size in bytes for density code 0.">AT45_DENSITY_CODE_0_DEVICE_SIZE</a>
<a name="l00255"></a>00255                         &lt;&lt; <a class="code" href="group__at45__flash__group.html#ga8bff1db9428e9a19474ce85690fb3920" title="Get AT45 density code from Device ID 1.">at45_get_density_code</a>(device_id1);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00264"></a><a class="code" href="group__at45__flash__group.html#gaf7891b1c39776803a44b21db7c4d045f">00264</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__at45__flash__group.html#gaf7891b1c39776803a44b21db7c4d045f" title="Get AT45 device page size from Device ID 1.">at45_get_page_size</a>(<a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> device_id1)
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> density;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268         density = <a class="code" href="group__at45__flash__group.html#ga82cba3b67768162e8194ee6804e59330" title="AT45 density code to device size information translation table.">at45_density_table</a>[<a class="code" href="group__at45__flash__group.html#ga8bff1db9428e9a19474ce85690fb3920" title="Get AT45 density code from Device ID 1.">at45_get_density_code</a>(device_id1)];
<a name="l00269"></a>00269 
<a name="l00270"></a>00270         <span class="comment">/* Every step up in id for page size doubles the page size so just</span>
<a name="l00271"></a>00271 <span class="comment">         * shift it.</span>
<a name="l00272"></a>00272 <span class="comment">         */</span>
<a name="l00273"></a>00273         <span class="keywordflow">return</span> <a class="code" href="group__at45__flash__group.html#ga60a9c1eb09ba3849e29d2188ddfeed21" title="The page size in bytes for page size id 0.">AT45_PAGE_SIZE_ID_0_SIZE</a> &lt;&lt; (density &amp; <a class="code" href="group__at45__flash__group.html#ga856edfea1f82c495d5d38a36d726947d" title="Page size mask bits.">AT45_PS_MASK</a>);
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="preprocessor">#endif </span><span class="comment">/* FLASH_AT45_H_INCLUDED */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:09:58 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
