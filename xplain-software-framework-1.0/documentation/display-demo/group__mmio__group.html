<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: Memory-Mapped Input/Output (MMIO)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Memory-Mapped Input/Output (MMIO)</h1>
<p><div class="dynheader">
Collaboration diagram for Memory-Mapped Input/Output (MMIO):</div>
<div class="dynsection">
<center><table><tr><td><img src="group__mmio__group.png" border="0" alt="" usemap="#group____mmio____group_map"/>
<map name="group____mmio____group_map" id="group____mmio____group">
<area shape="rect" href="group__regs__group.html" title="Internal Register Definitions" alt="" coords="296,5,477,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__regs__group.html">Internal Register Definitions</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mmio__group.html#ga43547c3d9fb2e19bc395c2aef98ad0be">mmio_read16</a> (const void *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">16-bit read from I/O register  <a href="#ga43547c3d9fb2e19bc395c2aef98ad0be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mmio__group.html#gad2fef24ef653d408fd6d9d2fa199fda0">mmio_write16</a> (void *p, <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">16-bit write to I/O register  <a href="#gad2fef24ef653d408fd6d9d2fa199fda0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mmio__group.html#ga0ab4a164f0cbf98beea3a4897e1824c4">mmio_ccp_write8</a> (void *addr, <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a CCP-protected 8-bit register.  <a href="#ga0ab4a164f0cbf98beea3a4897e1824c4"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These accessors are used to access memory-mapped I/O registers on the chip as well as external devices hooked up through the external bus interface. Accessing such registers usually have side-effects, so these accessors ensure that the registers are accessed exactly as many times as specified.</p>
<p>Traditionally, such registers are accessed through pointers declared as "volatile", but using dedicated accessors has a number of advantages:</p>
<ul>
<li>Conceptually, it makes much more sense to provide special access semantics as part of an operation instead of the data associated with it.</li>
<li>The optimal way to access a register may vary from compiler to compiler (for example, gcc appears to generate slightly better code from inline assembly than from volatile access.) Such details are best hidden behind an accessor layer like this.</li>
<li>When dedicated accessors are used, it becomes very obvious that the code using them are in fact dealing with I/O. A volatile struct access looks just like any other struct access. </li>
</ul>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0ab4a164f0cbf98beea3a4897e1824c4"></a><!-- doxytag: member="io.h::mmio_ccp_write8" ref="ga0ab4a164f0cbf98beea3a4897e1824c4" args="(void *addr, uint8_t value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mmio_ccp_write8 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to a CCP-protected 8-bit register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>Address of the I/O register </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>Value to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga43547c3d9fb2e19bc395c2aef98ad0be"></a><!-- doxytag: member="io.h::mmio_read16" ref="ga43547c3d9fb2e19bc395c2aef98ad0be" args="(const void *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> mmio_read16 </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>16-bit read from I/O register </p>
<p>Reads LSB from address <em>p</em> and MSB from address <em>p+1</em>, in this order.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Interrupts are not disabled in this function. This must be done in the calling code if interrupts can corrupt reads, i.e., they access 16-bit registers in the same peripheral module and at the same time as this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>Address of LSB I/O register to read from </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2xmega_2include_2cpu_2io_8h_source.html#l00072">72</a> of file <a class="el" href="cpu_2xmega_2include_2cpu_2io_8h_source.html">io.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad2fef24ef653d408fd6d9d2fa199fda0"></a><!-- doxytag: member="io.h::mmio_write16" ref="gad2fef24ef653d408fd6d9d2fa199fda0" args="(void *p, uint16_t val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mmio_write16 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>16-bit write to I/O register </p>
<p>Writes LSB to address <em>p</em> and MSB to address <em>p+1</em>, in this order.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Interrupts are not disabled in this function. This must be done in the calling code if interrupts can corrupt writes, i.e., they access 16-bit registers in the same peripheral module and at the same time as this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>Address of LSB I/O register to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>16-bit value to write to registers </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2xmega_2include_2cpu_2io_8h_source.html#l00095">95</a> of file <a class="el" href="cpu_2xmega_2include_2cpu_2io_8h_source.html">io.h</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:00 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
