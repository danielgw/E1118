<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: AVR XMEGA Timer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>AVR XMEGA Timer<br/>
<small>
[<a class="el" href="group__timer__group.html">Timer</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for AVR XMEGA Timer:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__timer__xmega__group.png" border="0" alt="" usemap="#group____timer____xmega____group_map"/>
<map name="group____timer____xmega____group_map" id="group____timer____xmega____group">
<area shape="rect" href="group__timer__xmega__internal__group.html" title="AVR XMEGA Timer internals" alt="" coords="295,5,481,35"/><area shape="rect" href="group__timer__group.html" title="Timer" alt="" coords="7,5,60,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html">AVR XMEGA Timer internals</a></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Driver internal timer resolution type.  <a href="#ga846389f68c68d6bc2f6344b16eb84165"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a> )(struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer callback function type.  <a href="#ga16d6b23aa24118a8307662a9a03b6b2a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga92e77be6e17bd692bbcf771d2829c0d9">tc_timer_init</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, void *regs, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a> timer_callback)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Common initialization for timers.  <a href="#ga92e77be6e17bd692bbcf771d2829c0d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga3645d598368f0ce5eb98ba2ab9b91299">tc_timer_start</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable, reset and start TC.  <a href="#ga3645d598368f0ce5eb98ba2ab9b91299"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga1fc8b597d380b00bb108cbea8bcd545a">tc_timer_stop</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop and disable TC.  <a href="#ga1fc8b597d380b00bb108cbea8bcd545a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga0deea02ecd51108772966964ecc63db4">tc_timer_set_alarm</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> delay)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure new alarm on TC.  <a href="#ga0deea02ecd51108772966964ecc63db4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga1c5ef55753ec44c68d53fc227410d622">tc_timer_get_time</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current time of TC.  <a href="#ga1c5ef55753ec44c68d53fc227410d622"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga73aa589887587719e691a19105f445b5">tc_timer_set_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> resolution)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get best TC clock selection for specified resolution.  <a href="#ga73aa589887587719e691a19105f445b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#gabf4b7d5ca3ac16322cbb0bea4c33c2a7">tc_timer_write_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> resolution)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update clock selection for TC.  <a href="#gabf4b7d5ca3ac16322cbb0bea4c33c2a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#gab07f21733a20eb50adc0c19c972e5cdd">tc_timer_get_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> timer_res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get resolution in Hz for TC clock selection.  <a href="#gab07f21733a20eb50adc0c19c972e5cdd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#ga832570f0d6d83586657e578f6495f28a">tc_timer_maximum_delta</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the maximum delta for timers.  <a href="#ga832570f0d6d83586657e578f6495f28a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__group.html#gaa2daaab832b27a3d9fdb51978db92acf">tc_timer_read_resolution</a> (struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the currect clock selection of a timer.  <a href="#gaa2daaab832b27a3d9fdb51978db92acf"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The AVR XMEGA family features different modules that can be used as timers. A timer can be selected by using an ID. The valid IDs and the corresponding implementation are listed in the chip-specific section of this documentation (&lt;<a class="el" href="chip_2atxmega128a1_2include_2chip_2timer_8h.html" title="ATxmega128A1 chip-specific Timer definitions.">chip/timer.h</a>&gt;) since the different devices feature different configurations.</p>
<h2><a class="anchor" id="tc_timer_xmega_section">
AVR XMEGA TC timer</a></h2>
<p>Each AVR XMEGA TC-module corresponds to a single 16-bit timer, and this driver makes use of their compare channel A as the alarm trigger.<br/>
</p>
<p>To enable a timer, config symbols <em>CONFIG_TIMER_n</em> must be defined, where <em>n</em> corresponds to the ID of the timer. <em>CONFIG_TIMER_RESOLUTION</em> must also be set to a value (in Hz) for the default TC clock rate to be set.<br/>
</p>
<p>This driver will disable the TCs whenever they are not needed to conserve power.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000017">Todo:</a></b></dt><dd>Revisit, add 32-bit TCs. This requires use of the event system.</dd></dl>
<h2><a class="anchor" id="atxmega128a1_timer_section">
ATxmega128A1 timers</a></h2>
<p>The list below shows the relation between timer ID and its corresponding TC module:</p>
<ul>
<li>ID 0: TC 0 on port C</li>
<li>ID 1: TC 1 on port C</li>
<li>ID 2: TC 0 on port D</li>
<li>ID 3: TC 1 on port D</li>
<li>ID 4: TC 0 on port E</li>
<li>ID 5: TC 1 on port E</li>
<li>ID 6: TC 0 on port F</li>
<li>ID 7: TC 1 on port F </li>
</ul>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga16d6b23aa24118a8307662a9a03b6b2a"></a><!-- doxytag: member="timer_xmega.h::timer_callback_t" ref="ga16d6b23aa24118a8307662a9a03b6b2a" args=")(struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a>)(struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer callback function type. </p>
<p>Pointer to the function to be called once a timer expires.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to the timer_t object that was associated with the current alarm/timer interrupt. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="timer__xmega_8h_source.html#l00086">86</a> of file <a class="el" href="timer__xmega_8h_source.html">timer_xmega.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga846389f68c68d6bc2f6344b16eb84165"></a><!-- doxytag: member="timer_xmega.h::timer_res_t" ref="ga846389f68c68d6bc2f6344b16eb84165" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Driver internal timer resolution type. </p>

<p>Definition at line <a class="el" href="timer__xmega_8h_source.html#l00074">74</a> of file <a class="el" href="timer__xmega_8h_source.html">timer_xmega.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gab07f21733a20eb50adc0c19c972e5cdd"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_get_resolution" ref="gab07f21733a20eb50adc0c19c972e5cdd" args="(uint8_t tc_id, timer_res_t timer_res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tc_timer_get_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td>
          <td class="paramname"> <em>timer_res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get resolution in Hz for TC clock selection. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer_res</em>&nbsp;</td><td>Clock selection for TC.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TC resolution in Hz. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00241">241</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="tc__xmega_8h_source.html#l00118">tc_get_resolution()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1c5ef55753ec44c68d53fc227410d622"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_get_time" ref="ga1c5ef55753ec44c68d53fc227410d622" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> tc_timer_get_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get current time of TC. </p>
<p><b>For internal use only.</b></p>
<p>Returns the current time of the TC, if it is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Time of TC, or 0 if it is disabled. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00372">372</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="tc_8h_source.html#l00127">tc_pclk_is_enabled()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00288">tc_read_reg16</a>.</p>

</div>
</div>
<a class="anchor" id="ga92e77be6e17bd692bbcf771d2829c0d9"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_init" ref="ga92e77be6e17bd692bbcf771d2829c0d9" args="(uint8_t tc_id, void *regs, struct timer *timer, timer_callback_t timer_callback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Common initialization for timers. </p>
<p><b>For internal use only.</b></p>
<p>Stores data needed for the timer: TC base address, default clock selection and callback function. The TC is reset, and compare channel A enabled before the TC is left disabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>regs</em>&nbsp;</td><td>Base address of TC </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Pointer to callback function. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00134">134</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00112">timer::callback</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="arch_2avr8_2include_2arch_2intc_8h_source.html#l00078">intc_set_irq_data</a>, <a class="el" href="timer__xmega_8h_source.html#l00110">timer::intlvl</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00257">TC_BIT</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="xmega__tc_8h_source.html#l00227">TC_CMD_RESET</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, <a class="el" href="tc__xmega_8h_source.html#l00084">tc_select_clock()</a>, <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>, and <a class="el" href="assert_8h_source.html#l00100">unhandled_case</a>.</p>

</div>
</div>
<a class="anchor" id="ga832570f0d6d83586657e578f6495f28a"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_maximum_delta" ref="ga832570f0d6d83586657e578f6495f28a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> tc_timer_maximum_delta </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the maximum delta for timers. </p>
<p><b>For internal use only.</b></p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Maximum number of ticks that can be used when setting timer alarms. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8h_source.html#l00086">86</a> of file <a class="el" href="tc__timer__xmega_8h_source.html">tc_timer_xmega.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa2daaab832b27a3d9fdb51978db92acf"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_read_resolution" ref="gaa2daaab832b27a3d9fdb51978db92acf" args="(struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> tc_timer_read_resolution </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the currect clock selection of a timer. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current clock selection for <em>timer</em>. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8h_source.html#l00099">99</a> of file <a class="el" href="tc__timer__xmega_8h_source.html">tc_timer_xmega.h</a>.</p>

<p>References <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>.</p>

</div>
</div>
<a class="anchor" id="ga0deea02ecd51108772966964ecc63db4"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_set_alarm" ref="ga0deea02ecd51108772966964ecc63db4" args="(uint8_t tc_id, struct timer *timer, uint16_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_set_alarm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure new alarm on TC. </p>
<p><b>For internal use only.</b></p>
<p>Sets a new compare value for compare channel A and enables its interrupt.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>Delay for timer alarm. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00295">295</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, <a class="el" href="timer__xmega_8h_source.html#l00110">timer::intlvl</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00257">TC_BIT</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00127">tc_pclk_is_enabled()</a>, <a class="el" href="xmega__tc_8h_source.html#l00288">tc_read_reg16</a>, <a class="el" href="xmega__tc_8h_source.html#l00285">tc_write_reg16</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="ga73aa589887587719e691a19105f445b5"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_set_resolution" ref="ga73aa589887587719e691a19105f445b5" args="(uint8_t tc_id, uint32_t resolution)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> tc_timer_set_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>resolution</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get best TC clock selection for specified resolution. </p>
<p><b>For internal use only.</b></p>
<p>Returns the clock selection for the TC that gives a resolution equal to or better than the one specified, assuming the system clock allows for it. If the desired resolution is not attainable, the clock selection for maximum rate is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID if TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resolution</em>&nbsp;</td><td>Desired TC resolution in Hz.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Clock selection for TC. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00227">227</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="tc__xmega_8h_source.html#l00084">tc_select_clock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3645d598368f0ce5eb98ba2ab9b91299"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_start" ref="ga3645d598368f0ce5eb98ba2ab9b91299" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable, reset and start TC. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00274">274</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00226">TC_CMD_RESTART</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="ga1fc8b597d380b00bb108cbea8bcd545a"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_stop" ref="ga1fc8b597d380b00bb108cbea8bcd545a" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop and disable TC. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00349">349</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="gabf4b7d5ca3ac16322cbb0bea4c33c2a7"></a><!-- doxytag: member="tc_timer_xmega.h::tc_timer_write_resolution" ref="gabf4b7d5ca3ac16322cbb0bea4c33c2a7" args="(uint8_t tc_id, struct timer *timer, timer_res_t resolution)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_write_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td>
          <td class="paramname"> <em>timer_res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update clock selection for TC. </p>
<p><b>For internal use only.</b></p>
<p>Stores new clock selection, and updates the current clock selection of the TC if it is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer_res</em>&nbsp;</td><td>New clock selection for TC. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00257">257</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:01 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
