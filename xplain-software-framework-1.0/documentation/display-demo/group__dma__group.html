<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: Direct Memory Access (DMA) helpers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Direct Memory Access (DMA) helpers</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A physical/virtual address pair used for DMA.  <a href="uniondma__addr__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#ga0a8886e0a1d92428abae379102fe11cd">CPU_DMA_ALIGN</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">log2 of the minimum alignment of DMA-able objects  <a href="#ga0a8886e0a1d92428abae379102fe11cd"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a> { <a class="el" href="group__dma__group.html#ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a6b04244ec323a21648b1ec14716a51ec">DMA_FROM_DEVICE</a> =  0, 
<a class="el" href="group__dma__group.html#ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a5408f0de29ead1f81d3bc25c695d1e5b">DMA_TO_DEVICE</a> =  1, 
<a class="el" href="group__dma__group.html#ggadfb9879db2d9d98aa2cdb8d1cb6a18d8aabc201159a915ca996995e17b871e60f">DMA_BIDIRECTIONAL</a> =  2
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The direction of a DMA transfer. </p>
 <a href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#gae3934b509d3e044a04fca010577663b0">dma_addr_failure</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return an address indicating failure.  <a href="#gae3934b509d3e044a04fca010577663b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#gaf4190191c1f0a3ad687d220e64d70058">dma_addr_is_failed</a> (<a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if a DMA address <em>addr</em> indicates failure.  <a href="#gaf4190191c1f0a3ad687d220e64d70058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#gae0d1a8ba494cef3af85442037ab13026">dma_sync_for_device</a> (<a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr, size_t size, enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a> direction)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Synchronize a DMA buffer before transfer.  <a href="#gae0d1a8ba494cef3af85442037ab13026"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#ga9bbb15dfc602e8dad774f345a0cfa0d6">dma_sync_for_cpu</a> (<a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr, size_t size, enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a> direction)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Synchronize a DMA buffer after transfer.  <a href="#ga9bbb15dfc602e8dad774f345a0cfa0d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#ga26f01341cdeb18a273a73ddaed64a767">dma_map_single</a> (const void *vaddr, size_t size, enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a> direction)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Map a single contiguous buffer for DMA transfer.  <a href="#ga26f01341cdeb18a273a73ddaed64a767"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dma__group.html#ga0e5f968301a1b0aa0a3b3bb86e046ff9">dma_unmap_single</a> (<a class="el" href="uniondma__addr__t.html">dma_addr_t</a> addr, size_t size, enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a> direction)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unmap a single contiguous buffer after a DMA transfer.  <a href="#ga0e5f968301a1b0aa0a3b3bb86e046ff9"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Many chips supported by this framework allow certain on-chip (and in some cases, external) peripherals to transfer data to and from RAM directly without CPU intervention. This is known as Direct Memory Access, or DMA.</p>
<p>Depending on the chip in question, there may be various limitations imposed on the memory used in a DMA transfer:</p>
<ul>
<li>Processors with MMU hardware may use different addresses internally (virtual addresses) than peripherals use (physical addresses)</li>
<li>Processors with a cache may require various cache synchronization operations to be performed in order to make sure that the peripheral and the CPU see the same memory contents</li>
<li>Such processors may also allow the memory to be made "coherent", which will ensure that the CPU and peripheral views of the memory are always consistent, but at the cost of increased CPU overhead when accessing it.</li>
</ul>
<p>The DMA helper functions in this module aim to make it easier to write generic code which will work on chips with any or none of these limitations without imposing any unnecessary overhead.</p>
<p>Note that some chips may not support DMA at all. It is still recommended, however, to follow the rules laid out in this module when writing code dealing with data transfer, as it will make it easier to port it to a different chip in the future. On such devices, utilizing the generic DMA helpers will not introduce any additional overhead.</p>
<h2><a class="anchor" id="dma_phys_virt">
Physical and Virtual Addresses</a></h2>
<p>Most of the chips supported by this framework do not distinguish between physical addresses (i.e. addresses that appear on the bus) and virtual addresses (i.e. addresses used in CPU instructions). On these chips, the virtual address accessed by software will always appear unchanged as a physical address on the bus.</p>
<p>Other chips, e.g. all chips in the AVR32 AP7 family, have a Memory Management Unit which translates each address accessed by the CPU into a (possibly different) physical address before it appears on the bus. When setting up DMA transfers on these chips, care must be taken to give the <em>physical</em> address to the peripheral that is to perform the data transfer, as the virtual address used to access the memory may not even be a valid address on the bus.</p>
<p>In order to obtain a physical address corresponding to an arbitrary virtual address, the <a class="el" href="group__dma__group.html#ga26f01341cdeb18a273a73ddaed64a767" title="Map a single contiguous buffer for DMA transfer.">dma_map_single()</a> function may be used. The value returned represents both the physical and virtual address of the mapped object, so it's usually a good idea to store this value as an reference to the object instead of just the virtual pointer. On platforms without MMU hardware, the value is stored as a union, so it won't take any additional space.</p>
<p>When the DMA transfer is finished, the object must be unmapped by calling <a class="el" href="group__dma__group.html#ga0e5f968301a1b0aa0a3b3bb86e046ff9" title="Unmap a single contiguous buffer after a DMA transfer.">dma_unmap_single()</a>.</p>
<h2><a class="anchor" id="dma_cache_sync">
Cache synchronization</a></h2>
<p>The <a class="el" href="group__dma__group.html#ga26f01341cdeb18a273a73ddaed64a767" title="Map a single contiguous buffer for DMA transfer.">dma_map_single()</a> and <a class="el" href="group__dma__group.html#ga0e5f968301a1b0aa0a3b3bb86e046ff9" title="Unmap a single contiguous buffer after a DMA transfer.">dma_unmap_single()</a> functions described in the previous section will also ensure that any cached data is properly synchronized before returning. Sometimes, however, the same object may be used for multiple data transfers, and it is somewhat wasteful to do the address translation for each and every transfer.</p>
<p>The <a class="el" href="group__dma__group.html#ga9bbb15dfc602e8dad774f345a0cfa0d6" title="Synchronize a DMA buffer after transfer.">dma_sync_for_cpu()</a> function may be used to synchronize the caches after a data transfer without unmapping the object. After the CPU is done processing the data and wants to re-use the object for another transfer, the <a class="el" href="group__dma__group.html#gae0d1a8ba494cef3af85442037ab13026" title="Synchronize a DMA buffer before transfer.">dma_sync_for_device()</a> may be called to resynchronize the caches before the next transfer.</p>
<p>In order to ensure correct operation on all supported chips, the following rules must be observed:</p>
<ul>
<li>After calling <a class="el" href="group__dma__group.html#ga26f01341cdeb18a273a73ddaed64a767" title="Map a single contiguous buffer for DMA transfer.">dma_map_single()</a> or <a class="el" href="group__dma__group.html#gae0d1a8ba494cef3af85442037ab13026" title="Synchronize a DMA buffer before transfer.">dma_sync_for_device()</a>, the peripheral may access the data but the CPU must not.</li>
<li>After calling <a class="el" href="group__dma__group.html#ga0e5f968301a1b0aa0a3b3bb86e046ff9" title="Unmap a single contiguous buffer after a DMA transfer.">dma_unmap_single()</a> or <a class="el" href="group__dma__group.html#ga9bbb15dfc602e8dad774f345a0cfa0d6" title="Synchronize a DMA buffer after transfer.">dma_sync_for_cpu()</a>, the CPU may access the data, but the peripheral must not. </li>
</ul>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga0a8886e0a1d92428abae379102fe11cd"></a><!-- doxytag: member="dma.h::CPU_DMA_ALIGN" ref="ga0a8886e0a1d92428abae379102fe11cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPU_DMA_ALIGN&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>log2 of the minimum alignment of DMA-able objects </p>

<p>Definition at line <a class="el" href="cpu_2xmega_2include_2cpu_2dma_8h_source.html#l00045">45</a> of file <a class="el" href="cpu_2xmega_2include_2cpu_2dma_8h_source.html">dma.h</a>.</p>

<p>Referenced by <a class="el" href="tsfs_8c_source.html#l00232">tsfs_init()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gadfb9879db2d9d98aa2cdb8d1cb6a18d8"></a><!-- doxytag: member="dma.h::dma_direction" ref="gadfb9879db2d9d98aa2cdb8d1cb6a18d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The direction of a DMA transfer. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a6b04244ec323a21648b1ec14716a51ec"></a><!-- doxytag: member="DMA_FROM_DEVICE" ref="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a6b04244ec323a21648b1ec14716a51ec" args="" -->DMA_FROM_DEVICE</em>&nbsp;</td><td>
<p>From memory to peripheral. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a5408f0de29ead1f81d3bc25c695d1e5b"></a><!-- doxytag: member="DMA_TO_DEVICE" ref="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8a5408f0de29ead1f81d3bc25c695d1e5b" args="" -->DMA_TO_DEVICE</em>&nbsp;</td><td>
<p>From peripheral to memory. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8aabc201159a915ca996995e17b871e60f"></a><!-- doxytag: member="DMA_BIDIRECTIONAL" ref="ggadfb9879db2d9d98aa2cdb8d1cb6a18d8aabc201159a915ca996995e17b871e60f" args="" -->DMA_BIDIRECTIONAL</em>&nbsp;</td><td>
<p>Both of the above. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="include_2dma_8h_source.html#l00133">133</a> of file <a class="el" href="include_2dma_8h_source.html">dma.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gae3934b509d3e044a04fca010577663b0"></a><!-- doxytag: member="dma_nommu.h::dma_addr_failure" ref="gae3934b509d3e044a04fca010577663b0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uniondma__addr__t.html">dma_addr_t</a> dma_addr_failure </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return an address indicating failure. </p>
<p>This is used primarily by the DMA allocator to indicate allocation failure. </p>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00071">71</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

<p>References <a class="el" href="dma__nommu_8h_source.html#l00062">dma_addr_t::ptr</a>.</p>

</div>
</div>
<a class="anchor" id="gaf4190191c1f0a3ad687d220e64d70058"></a><!-- doxytag: member="dma_nommu.h::dma_addr_is_failed" ref="gaf4190191c1f0a3ad687d220e64d70058" args="(dma_addr_t addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool dma_addr_is_failed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test if a DMA address <em>addr</em> indicates failure. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td><em>addr</em> indicates failure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td><em>addr</em> is valid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00086">86</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

<p>References <a class="el" href="dma__nommu_8h_source.html#l00062">dma_addr_t::ptr</a>.</p>

</div>
</div>
<a class="anchor" id="ga26f01341cdeb18a273a73ddaed64a767"></a><!-- doxytag: member="dma_nommu.h::dma_map_single" ref="ga26f01341cdeb18a273a73ddaed64a767" args="(const void *vaddr, size_t size, enum dma_direction direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uniondma__addr__t.html">dma_addr_t</a> dma_map_single </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a>&nbsp;</td>
          <td class="paramname"> <em>direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Map a single contiguous buffer for DMA transfer. </p>
<p>After this function has been called, the device can access the buffer, but the CPU must not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vaddr</em>&nbsp;</td><td>The virtual address of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The length of the buffer in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>direction</em>&nbsp;</td><td>The direction of the transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A physical/virtual address pair for the mapping </dd></dl>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00135">135</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

<p>References <a class="el" href="dma__nommu_8h_source.html#l00062">dma_addr_t::ptr</a>.</p>

<p>Referenced by <a class="el" href="buffer_8h_source.html#l00106">buffer_init_rx()</a>, and <a class="el" href="buffer_8h_source.html#l00078">buffer_init_tx()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9bbb15dfc602e8dad774f345a0cfa0d6"></a><!-- doxytag: member="dma_nommu.h::dma_sync_for_cpu" ref="ga9bbb15dfc602e8dad774f345a0cfa0d6" args="(dma_addr_t addr, size_t size, enum dma_direction direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dma_sync_for_cpu </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a>&nbsp;</td>
          <td class="paramname"> <em>direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Synchronize a DMA buffer after transfer. </p>
<p>After this function has been called, the CPU can access the buffer, but the device must not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The physical/virtual addresses of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The length of the buffer in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>direction</em>&nbsp;</td><td>The direction of the transfer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00117">117</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae0d1a8ba494cef3af85442037ab13026"></a><!-- doxytag: member="dma_nommu.h::dma_sync_for_device" ref="gae0d1a8ba494cef3af85442037ab13026" args="(dma_addr_t addr, size_t size, enum dma_direction direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dma_sync_for_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a>&nbsp;</td>
          <td class="paramname"> <em>direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Synchronize a DMA buffer before transfer. </p>
<p>After this function has been called, the device can access the buffer, but the CPU must not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The physical/virtual addresses of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The length of the buffer in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>direction</em>&nbsp;</td><td>The direction of the transfer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00101">101</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e5f968301a1b0aa0a3b3bb86e046ff9"></a><!-- doxytag: member="dma_nommu.h::dma_unmap_single" ref="ga0e5f968301a1b0aa0a3b3bb86e046ff9" args="(dma_addr_t addr, size_t size, enum dma_direction direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dma_unmap_single </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uniondma__addr__t.html">dma_addr_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__dma__group.html#gadfb9879db2d9d98aa2cdb8d1cb6a18d8">dma_direction</a>&nbsp;</td>
          <td class="paramname"> <em>direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unmap a single contiguous buffer after a DMA transfer. </p>
<p>After this function has been called, the CPU can access the buffer, but the device must not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The physical/virtual addresses of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The length of the buffer in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>direction</em>&nbsp;</td><td>The direction of the transfer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dma__nommu_8h_source.html#l00153">153</a> of file <a class="el" href="dma__nommu_8h_source.html">dma_nommu.h</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:00 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
