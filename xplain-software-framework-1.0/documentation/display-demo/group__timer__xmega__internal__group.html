<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: AVR XMEGA Timer internals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>AVR XMEGA Timer internals<br/>
<small>
[<a class="el" href="group__timer__xmega__group.html">AVR XMEGA Timer</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for AVR XMEGA Timer internals:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__timer__xmega__internal__group.png" border="0" alt="" usemap="#group____timer____xmega____internal____group_map"/>
<map name="group____timer____xmega____internal____group_map" id="group____timer____xmega____internal____group">
<area shape="rect" href="group__timer__xmega__group.html" title="AVR XMEGA Timer" alt="" coords="7,5,140,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimer.html">timer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer data.  <a href="structtimer.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#gad480d034c214dccee88d2a826603455f">TIMER_SELECT</a>(func, timer_id,...)&nbsp;&nbsp;&nbsp;<a class="el" href="structtimer.html">timer</a>##timer_id##_##func##_priv(__VA_ARGS__)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select a timer function.  <a href="#gad480d034c214dccee88d2a826603455f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#gacae20d3330784b42a62f416620090cad">tc_timer_irq_handler</a> (void *int_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TC compare interrupt handler.  <a href="#gacae20d3330784b42a62f416620090cad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#gaeb692e1409b9ecb53eda541048a83cfd">tc_timer_init</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, void *regs, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a> callback)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Common initialization for timers.  <a href="#gaeb692e1409b9ecb53eda541048a83cfd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#ga73aa589887587719e691a19105f445b5">tc_timer_set_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> resolution)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get best TC clock selection for specified resolution.  <a href="#ga73aa589887587719e691a19105f445b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#gab07f21733a20eb50adc0c19c972e5cdd">tc_timer_get_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> timer_res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get resolution in Hz for TC clock selection.  <a href="#gab07f21733a20eb50adc0c19c972e5cdd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#gab79ff85d2e5dc23524f7589d3a9354f8">tc_timer_write_resolution</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> timer_res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update clock selection for TC.  <a href="#gab79ff85d2e5dc23524f7589d3a9354f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#ga3645d598368f0ce5eb98ba2ab9b91299">tc_timer_start</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable, reset and start TC.  <a href="#ga3645d598368f0ce5eb98ba2ab9b91299"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#ga0deea02ecd51108772966964ecc63db4">tc_timer_set_alarm</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>, <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> delay)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure new alarm on TC.  <a href="#ga0deea02ecd51108772966964ecc63db4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#ga1fc8b597d380b00bb108cbea8bcd545a">tc_timer_stop</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop and disable TC.  <a href="#ga1fc8b597d380b00bb108cbea8bcd545a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__xmega__internal__group.html#ga1c5ef55753ec44c68d53fc227410d622">tc_timer_get_time</a> (<a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> tc_id, struct <a class="el" href="structtimer.html">timer</a> *<a class="el" href="structtimer.html">timer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current time of TC.  <a href="#ga1c5ef55753ec44c68d53fc227410d622"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gad480d034c214dccee88d2a826603455f"></a><!-- doxytag: member="timer_xmega.h::TIMER_SELECT" ref="gad480d034c214dccee88d2a826603455f" args="(func, timer_id,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_SELECT</td>
          <td>(</td>
          <td class="paramtype">func, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timer_id, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;<a class="el" href="structtimer.html">timer</a>##timer_id##_##func##_priv(__VA_ARGS__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Select a timer function. </p>
<p><b>For internal use only.</b></p>
<p>This macro is needed to expand macros properly that are passed in as IDs. In addition it reduces these kind of macros to one set instead of several ones for each function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>Function name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer_id</em>&nbsp;</td><td>ID of timer to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>Variadic arguments. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="timer__xmega_8h_source.html#l00127">127</a> of file <a class="el" href="timer__xmega_8h_source.html">timer_xmega.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gab07f21733a20eb50adc0c19c972e5cdd"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_get_resolution" ref="gab07f21733a20eb50adc0c19c972e5cdd" args="(uint8_t tc_id, timer_res_t timer_res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tc_timer_get_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td>
          <td class="paramname"> <em>timer_res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get resolution in Hz for TC clock selection. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer_res</em>&nbsp;</td><td>Clock selection for TC.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TC resolution in Hz. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00241">241</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="tc__xmega_8h_source.html#l00118">tc_get_resolution()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1c5ef55753ec44c68d53fc227410d622"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_get_time" ref="ga1c5ef55753ec44c68d53fc227410d622" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> tc_timer_get_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get current time of TC. </p>
<p><b>For internal use only.</b></p>
<p>Returns the current time of the TC, if it is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Time of TC, or 0 if it is disabled. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00372">372</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="tc_8h_source.html#l00127">tc_pclk_is_enabled()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00288">tc_read_reg16</a>.</p>

</div>
</div>
<a class="anchor" id="gaeb692e1409b9ecb53eda541048a83cfd"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_init" ref="gaeb692e1409b9ecb53eda541048a83cfd" args="(uint8_t tc_id, void *regs, struct timer *timer, timer_callback_t callback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga16d6b23aa24118a8307662a9a03b6b2a">timer_callback_t</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Common initialization for timers. </p>
<p><b>For internal use only.</b></p>
<p>Stores data needed for the timer: TC base address, default clock selection and callback function. The TC is reset, and compare channel A enabled before the TC is left disabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>regs</em>&nbsp;</td><td>Base address of TC </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Pointer to callback function. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00134">134</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00112">timer::callback</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="arch_2avr8_2include_2arch_2intc_8h_source.html#l00078">intc_set_irq_data</a>, <a class="el" href="timer__xmega_8h_source.html#l00110">timer::intlvl</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00257">TC_BIT</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="xmega__tc_8h_source.html#l00227">TC_CMD_RESET</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, <a class="el" href="tc__xmega_8h_source.html#l00084">tc_select_clock()</a>, <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>, and <a class="el" href="assert_8h_source.html#l00100">unhandled_case</a>.</p>

</div>
</div>
<a class="anchor" id="gacae20d3330784b42a62f416620090cad"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_irq_handler" ref="gacae20d3330784b42a62f416620090cad" args="(void *int_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tc_timer_irq_handler </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>int_data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TC compare interrupt handler. </p>
<p><b>For internal use only.</b></p>
<p>This handler is executed when compare channel A of the TC is triggered and an alarm has been set. It disables the compare interrupt, but leaves the TC running. If a callback function has been set for the timer, it is called directly by this handler.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>int_data</em>&nbsp;</td><td>Pointer to a timer struct. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00067">67</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00112">timer::callback</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="ga0deea02ecd51108772966964ecc63db4"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_set_alarm" ref="ga0deea02ecd51108772966964ecc63db4" args="(uint8_t tc_id, struct timer *timer, uint16_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_set_alarm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure new alarm on TC. </p>
<p><b>For internal use only.</b></p>
<p>Sets a new compare value for compare channel A and enables its interrupt.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>Delay for timer alarm. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00295">295</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00069">cpu_irq_restore()</a>, <a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html#l00055">cpu_irq_save()</a>, <a class="el" href="timer__xmega_8h_source.html#l00110">timer::intlvl</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00257">TC_BIT</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, <a class="el" href="tc_8h_source.html#l00127">tc_pclk_is_enabled()</a>, <a class="el" href="xmega__tc_8h_source.html#l00288">tc_read_reg16</a>, <a class="el" href="xmega__tc_8h_source.html#l00285">tc_write_reg16</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="ga73aa589887587719e691a19105f445b5"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_set_resolution" ref="ga73aa589887587719e691a19105f445b5" args="(uint8_t tc_id, uint32_t resolution)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a> tc_timer_set_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>resolution</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get best TC clock selection for specified resolution. </p>
<p><b>For internal use only.</b></p>
<p>Returns the clock selection for the TC that gives a resolution equal to or better than the one specified, assuming the system clock allows for it. If the desired resolution is not attainable, the clock selection for maximum rate is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID if TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resolution</em>&nbsp;</td><td>Desired TC resolution in Hz.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Clock selection for TC. </dd></dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00227">227</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="tc__xmega_8h_source.html#l00084">tc_select_clock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3645d598368f0ce5eb98ba2ab9b91299"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_start" ref="ga3645d598368f0ce5eb98ba2ab9b91299" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable, reset and start TC. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00274">274</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00226">TC_CMD_RESTART</a>, <a class="el" href="tc_8h_source.html#l00109">tc_enable_pclk()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="ga1fc8b597d380b00bb108cbea8bcd545a"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_stop" ref="ga1fc8b597d380b00bb108cbea8bcd545a" args="(uint8_t tc_id, struct timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop and disable TC. </p>
<p><b>For internal use only.</b></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00349">349</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, <a class="el" href="xmega__tc_8h_source.html#l00260">TC_BF</a>, <a class="el" href="xmega__tc_8h_source.html#l00194">TC_CLKSEL_OFF</a>, <a class="el" href="tc_8h_source.html#l00118">tc_disable_pclk()</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
<a class="anchor" id="gab79ff85d2e5dc23524f7589d3a9354f8"></a><!-- doxytag: member="tc_timer_xmega.c::tc_timer_write_resolution" ref="gab79ff85d2e5dc23524f7589d3a9354f8" args="(uint8_t tc_id, struct timer *timer, timer_res_t timer_res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_timer_write_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>tc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimer.html">timer</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__timer__xmega__group.html#ga846389f68c68d6bc2f6344b16eb84165">timer_res_t</a>&nbsp;</td>
          <td class="paramname"> <em>timer_res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update clock selection for TC. </p>
<p><b>For internal use only.</b></p>
<p>Stores new clock selection, and updates the current clock selection of the TC if it is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc_id</em>&nbsp;</td><td>ID of the TC. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to timer struct. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timer_res</em>&nbsp;</td><td>New clock selection for TC. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tc__timer__xmega_8c_source.html#l00257">257</a> of file <a class="el" href="tc__timer__xmega_8c_source.html">tc_timer_xmega.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="timer__xmega_8h_source.html#l00108">timer::clksel</a>, <a class="el" href="timer__xmega_8h_source.html#l00106">timer::regs</a>, and <a class="el" href="xmega__tc_8h_source.html#l00279">tc_write_reg8</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:01 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
