<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: Tiny Simple File System (TSFS), block device based</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Tiny Simple File System (TSFS), block device based</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtsfs__file.html">tsfs_file</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds information about a specific file within a file system.  <a href="structtsfs__file.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtsfs__header.html">tsfs_header</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Header structure. Holds generic information about the file system.  <a href="structtsfs__header.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtsfs__read__request.html">tsfs_read_request</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds current read request being processed by a file system.  <a href="structtsfs__read__request.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtsfs__filetable__entry.html">tsfs_filetable_entry</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds information on one file in the file table.  <a href="structtsfs__filetable__entry.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtsfs.html">tsfs</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds information on a TSFS instance.  <a href="structtsfs.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gaa994d078556dd7130b291230548d0008">TSFS_ID</a>&nbsp;&nbsp;&nbsp;0x17c1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unique ID to identify TSFS.  <a href="#gaa994d078556dd7130b291230548d0008"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga9fd4f8fe49119798137c73fa0ba43eb6">TSFS_FILENAME_LEN</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Max characters in a filename.  <a href="#ga9fd4f8fe49119798137c73fa0ba43eb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gac30577e97437b13a6ff2bcbb8e7f5478">TSFS_MAX_FILES</a>&nbsp;&nbsp;&nbsp;31</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Max number of files supported.  <a href="#gac30577e97437b13a6ff2bcbb8e7f5478"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gaea54e12350dec9cfc24593c9711047ba">TSFS_BLOCKSIZE</a>&nbsp;&nbsp;&nbsp;512</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of block in bytes.  <a href="#gaea54e12350dec9cfc24593c9711047ba"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">tsfs_seek_origin</a> { <a class="el" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a7f53e3798ec48e79c0897ba5138f9b05">SEEK_SET</a>, 
<a class="el" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7af3091144c125782cf17bcd3eb84e454c">SEEK_CUR</a>, 
<a class="el" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a060e45245be703e272d7264bafcfdc63">SEEK_END</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The relative starting point of seek operations. </p>
 <a href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gae87db1013103ee0211bd317146977f28">tsfs_init</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>, struct <a class="el" href="structblock__device.html">block_device</a> *system_blockdevice, struct <a class="el" href="structworkqueue__task.html">workqueue_task</a> *system_ready_task)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates a Tiny Simple File System.  <a href="#gae87db1013103ee0211bd317146977f28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga9f0be6fc875a8b14bd8647c1d473fdde">tsfs_open</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>, const char *filename, struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *filehandle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a file by populating a file handle.  <a href="#ga9f0be6fc875a8b14bd8647c1d473fdde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga48de8abfbf915d123a12f2c170c77afe">tsfs_seek</a> (struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *file, <a class="el" href="group__stdint__group.html#gafd12020da5a235dfcf0c3c748fb5baed">int32_t</a> offset, enum <a class="el" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">tsfs_seek_origin</a> origin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Manualy move the file cursor.  <a href="#ga48de8abfbf915d123a12f2c170c77afe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga921f07c71436c040d0354f283f0b693b">tsfs_read</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>, struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *file, void *<a class="el" href="structbuffer.html">buffer</a>, <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> length, struct <a class="el" href="structworkqueue__task.html">workqueue_task</a> *task)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads a chunk of data from a file to a buffer.  <a href="#ga921f07c71436c040d0354f283f0b693b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gaab9c9ffdd0717336e1ccac397e158f06">tsfs_get_filename</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>, <a class="el" href="group__stdint__group.html#ga381e0b283f5c3d9f7e88e6aeb43c29f5">uint_fast8_t</a> file_index, <a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the filename of an indexed file into a buffer.  <a href="#gaab9c9ffdd0717336e1ccac397e158f06"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gaba08a17d567da21828972bf44798a89b">tsfs_get_file_size</a> (struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *file)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the file size in bytes for file <em>file</em>.  <a href="#gaba08a17d567da21828972bf44798a89b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga88cf5b8a152cf863fefd20fc99869545">tsfs_nr_files</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of files present in a file system.  <a href="#ga88cf5b8a152cf863fefd20fc99869545"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#gaeede48952c26734d9209530b8a8411ed">tsfs_volume_size</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size of the entire volume.  <a href="#gaeede48952c26734d9209530b8a8411ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga97aab27cfbdccc9aa7e43032c7507b15">tsfs_is_ready</a> (struct <a class="el" href="structtsfs.html">tsfs</a> *<a class="el" href="structtsfs.html">tsfs</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if file system is ready for use.  <a href="#ga97aab27cfbdccc9aa7e43032c7507b15"></a><br/></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga6ad5e43481607ea0d7982b1c712e5a52">tsfs_buf_list_done</a> (struct <a class="el" href="structblock__device.html">block_device</a> *bdev, struct <a class="el" href="structblock__request.html">block_request</a> *breq, struct <a class="el" href="structslist.html">slist</a> *buf_list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block device list complete callback.  <a href="#ga6ad5e43481607ea0d7982b1c712e5a52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsfs__group.html#ga6a1322588844b9a57b941ea0198cf5be">tsfs_read_page_done</a> (struct <a class="el" href="structblock__device.html">block_device</a> *bdev, struct <a class="el" href="structblock__request.html">block_request</a> *breq)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block device request complete callback.  <a href="#ga6a1322588844b9a57b941ea0198cf5be"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>file system.</p>
<p>This module provides mechanisms for data stored in a TSFS file system. Note: All data is stored using big endigan encoding, and translated to CPU specific endianess after being read into the file system.</p>
<p>In order to improve execution times most functions in this module assume input parameters are clean. This means that there are no sanity on any parameters unless it is explisitly stated in this document. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gaea54e12350dec9cfc24593c9711047ba"></a><!-- doxytag: member="tsfs.h::TSFS_BLOCKSIZE" ref="gaea54e12350dec9cfc24593c9711047ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TSFS_BLOCKSIZE&nbsp;&nbsp;&nbsp;512</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of block in bytes. </p>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00079">79</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>Referenced by <a class="el" href="tsfs_8c_source.html#l00232">tsfs_init()</a>, and <a class="el" href="tsfs_8c_source.html#l00317">tsfs_read()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9fd4f8fe49119798137c73fa0ba43eb6"></a><!-- doxytag: member="tsfs.h::TSFS_FILENAME_LEN" ref="ga9fd4f8fe49119798137c73fa0ba43eb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TSFS_FILENAME_LEN&nbsp;&nbsp;&nbsp;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Max characters in a filename. </p>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00068">68</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>Referenced by <a class="el" href="app__files_8c_source.html#l00305">screen_draw_file_list_from_index()</a>, <a class="el" href="app__slideshow_8c_source.html#l00176">slide_get_next_file()</a>, <a class="el" href="app__slideshow_8c_source.html#l00225">slide_show_file()</a>, and <a class="el" href="tsfs_8c_source.html#l00475">tsfs_get_filename()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa994d078556dd7130b291230548d0008"></a><!-- doxytag: member="tsfs.h::TSFS_ID" ref="gaa994d078556dd7130b291230548d0008" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TSFS_ID&nbsp;&nbsp;&nbsp;0x17c1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unique ID to identify TSFS. </p>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00066">66</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac30577e97437b13a6ff2bcbb8e7f5478"></a><!-- doxytag: member="tsfs.h::TSFS_MAX_FILES" ref="gac30577e97437b13a6ff2bcbb8e7f5478" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TSFS_MAX_FILES&nbsp;&nbsp;&nbsp;31</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Max number of files supported. </p>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00075">75</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>Referenced by <a class="el" href="tsfs_8c_source.html#l00232">tsfs_init()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gac9fdea7a0fdac8a11439440bdea0d2f7"></a><!-- doxytag: member="tsfs.h::tsfs_seek_origin" ref="gac9fdea7a0fdac8a11439440bdea0d2f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">tsfs_seek_origin</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The relative starting point of seek operations. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggac9fdea7a0fdac8a11439440bdea0d2f7a7f53e3798ec48e79c0897ba5138f9b05"></a><!-- doxytag: member="SEEK_SET" ref="ggac9fdea7a0fdac8a11439440bdea0d2f7a7f53e3798ec48e79c0897ba5138f9b05" args="" -->SEEK_SET</em>&nbsp;</td><td>
<p>Seek relative to beginning of file. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac9fdea7a0fdac8a11439440bdea0d2f7af3091144c125782cf17bcd3eb84e454c"></a><!-- doxytag: member="SEEK_CUR" ref="ggac9fdea7a0fdac8a11439440bdea0d2f7af3091144c125782cf17bcd3eb84e454c" args="" -->SEEK_CUR</em>&nbsp;</td><td>
<p>Seek relative to current cursor position. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac9fdea7a0fdac8a11439440bdea0d2f7a060e45245be703e272d7264bafcfdc63"></a><!-- doxytag: member="SEEK_END" ref="ggac9fdea7a0fdac8a11439440bdea0d2f7a060e45245be703e272d7264bafcfdc63" args="" -->SEEK_END</em>&nbsp;</td><td>
<p>Seek relative to end of file. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00193">193</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga6ad5e43481607ea0d7982b1c712e5a52"></a><!-- doxytag: member="tsfs.c::tsfs_buf_list_done" ref="ga6ad5e43481607ea0d7982b1c712e5a52" args="(struct block_device *bdev, struct block_request *breq, struct slist *buf_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tsfs_buf_list_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structblock__device.html">block_device</a> *&nbsp;</td>
          <td class="paramname"> <em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structblock__request.html">block_request</a> *&nbsp;</td>
          <td class="paramname"> <em>breq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structslist.html">slist</a> *&nbsp;</td>
          <td class="paramname"> <em>buf_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Block device list complete callback. </p>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00067">67</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaba08a17d567da21828972bf44798a89b"></a><!-- doxytag: member="tsfs.h::tsfs_get_file_size" ref="gaba08a17d567da21828972bf44798a89b" args="(struct tsfs_file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tsfs_get_file_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *&nbsp;</td>
          <td class="paramname"> <em>file</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the file size in bytes for file <em>file</em>. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Size given in bytes for file <em>file</em> </dd></dl>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00223">223</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00091">tsfs_file::end</a>, and <a class="el" href="tsfs_8h_source.html#l00089">tsfs_file::start</a>.</p>

<p>Referenced by <a class="el" href="app__files_8c_source.html#l00305">screen_draw_file_list_from_index()</a>.</p>

</div>
</div>
<a class="anchor" id="gaab9c9ffdd0717336e1ccac397e158f06"></a><!-- doxytag: member="tsfs.h::tsfs_get_filename" ref="gaab9c9ffdd0717336e1ccac397e158f06" args="(struct tsfs *tsfs, uint_fast8_t file_index, uint8_t *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tsfs_get_filename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga381e0b283f5c3d9f7e88e6aeb43c29f5">uint_fast8_t</a>&nbsp;</td>
          <td class="paramname"> <em>file_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the filename of an indexed file into a buffer. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>buffer must be able to hold at least <a class="el" href="group__tsfs__group.html#ga9fd4f8fe49119798137c73fa0ba43eb6">TSFS_FILENAME_LEN</a> bytes.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tsfs</em>&nbsp;</td><td>TSFS structure which holds file system information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file_index</em>&nbsp;</td><td>Index of file which name is to be fetched </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Buffer where filename will be written </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00475">475</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00147">tsfs_filetable_entry::filename</a>, <a class="el" href="arch_2avr8_2include_2arch_2string_8h_source.html#l00043">memcpy()</a>, and <a class="el" href="tsfs_8h_source.html#l00068">TSFS_FILENAME_LEN</a>.</p>

<p>Referenced by <a class="el" href="app__files_8c_source.html#l00305">screen_draw_file_list_from_index()</a>, <a class="el" href="app__slideshow_8c_source.html#l00176">slide_get_next_file()</a>, and <a class="el" href="app__slideshow_8c_source.html#l00225">slide_show_file()</a>.</p>

</div>
</div>
<a class="anchor" id="gae87db1013103ee0211bd317146977f28"></a><!-- doxytag: member="tsfs.h::tsfs_init" ref="gae87db1013103ee0211bd317146977f28" args="(struct tsfs *tsfs, struct block_device *system_blockdevice, struct workqueue_task *system_ready_task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a> tsfs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structblock__device.html">block_device</a> *&nbsp;</td>
          <td class="paramname"> <em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structworkqueue__task.html">workqueue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>init_done_task</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initiates a Tiny Simple File System. </p>
<p>The block device specified by <em>system_blockdevice</em> has to have a block size of <a class="el" href="group__tsfs__group.html#gaea54e12350dec9cfc24593c9711047ba">TSFS_BLOCKSIZE</a> bytes.</p>
<p>Immediately after returning from this function, the file system will have status <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a8d4f409eda53a10f049dc6d5a833ccba">ERR_BUSY</a>. The system is ready for use when the status changes to <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a7e4a42e3b6dd63708c64cf3db6f69566">STATUS_OK</a>. This can be polled for, or the parameter <em>init_done_task</em> can be used to specify a task to be scheduled when the system is ready.</p>
<p>In case the data loaded from the block device is not TSFS compatible the file system will not schedule the callback task, and set its own status to <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151aacb8e19f1a844f9dcef8448afaddc01f">ERR_BAD_FORMAT</a>. At this point the file system has to be re-initialized with a valid block device if it is to be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tsfs</em>&nbsp;</td><td>TSFS structure which holds file system information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bdev</em>&nbsp;</td><td>Block device to read data from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>init_done_task</em>&nbsp;</td><td>Callback task for when system is ready for use </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00232">232</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="assert_8h_source.html#l00089">assert</a>, <a class="el" href="tsfs_8h_source.html#l00168">tsfs::bdev</a>, <a class="el" href="board__physmem__pools_8c_source.html#l00043">board_extram_pool</a>, <a class="el" href="tsfs_8h_source.html#l00174">tsfs::buffer_data</a>, <a class="el" href="cpu_2xmega_2include_2cpu_2dma_8h_source.html#l00045">CPU_DMA_ALIGN</a>, <a class="el" href="tsfs_8h_source.html#l00183">tsfs::current_read_request</a>, <a class="el" href="status__codes_8h_source.html#l00064">ERR_BUSY</a>, <a class="el" href="status__codes_8h_source.html#l00061">ERR_NO_MEMORY</a>, <a class="el" href="malloc__simple_8c_source.html#l00052">malloc()</a>, <a class="el" href="physmem_8c_source.html#l00066">physmem_alloc()</a>, <a class="el" href="cpu_2xmega_2include_2cpu_2physmem_8h_source.html#l00052">PHYSMEM_ALLOC_ERR</a>, <a class="el" href="tsfs_8h_source.html#l00155">tsfs::status</a>, <a class="el" href="status__codes_8h_source.html#l00054">STATUS_OK</a>, <a class="el" href="tsfs_8h_source.html#l00128">tsfs_read_request::task</a>, <a class="el" href="tsfs_8h_source.html#l00079">TSFS_BLOCKSIZE</a>, and <a class="el" href="tsfs_8h_source.html#l00075">TSFS_MAX_FILES</a>.</p>

</div>
</div>
<a class="anchor" id="ga97aab27cfbdccc9aa7e43032c7507b15"></a><!-- doxytag: member="tsfs.h::tsfs_is_ready" ref="ga97aab27cfbdccc9aa7e43032c7507b15" args="(struct tsfs *tsfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tsfs_is_ready </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if file system is ready for use. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns true if a file system <em>tsfs</em> is ready for use </dd></dl>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00253">253</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00168">tsfs::bdev</a>, <a class="el" href="tsfs_8h_source.html#l00155">tsfs::status</a>, and <a class="el" href="status__codes_8h_source.html#l00054">STATUS_OK</a>.</p>

</div>
</div>
<a class="anchor" id="ga88cf5b8a152cf863fefd20fc99869545"></a><!-- doxytag: member="tsfs.h::tsfs_nr_files" ref="ga88cf5b8a152cf863fefd20fc99869545" args="(struct tsfs *tsfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tsfs_nr_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of files present in a file system. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of files in the file system <em>tsfs</em> </dd></dl>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00233">233</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00157">tsfs::header</a>, and <a class="el" href="tsfs_8h_source.html#l00109">tsfs_header::nr_files</a>.</p>

<p>Referenced by <a class="el" href="app__slideshow_8c_source.html#l00176">slide_get_next_file()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f0be6fc875a8b14bd8647c1d473fdde"></a><!-- doxytag: member="tsfs.h::tsfs_open" ref="ga9f0be6fc875a8b14bd8647c1d473fdde" args="(struct tsfs *tsfs, const char *filename, struct tsfs_file *filehandle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a> tsfs_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *&nbsp;</td>
          <td class="paramname"> <em>filehandle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Opens a file by populating a file handle. </p>
<p>Searches through the filetable of <em>tsfs</em> and opens the first file that matches the <em>filename</em> string. Note that this can be a pointer to any normal character array, even though TSFS filenames do not have a termchar</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tsfs</em>&nbsp;</td><td>TSFS structure which holds file system information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Name of file to be opened </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filehandle</em>&nbsp;</td><td>File structure to store results</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>\ref</em>&nbsp;</td><td>STATUS_OK if successful. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>\ref</em>&nbsp;</td><td>ERR_INVALID_ARG if file is not found. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00404">404</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00093">tsfs_file::cursor</a>, <a class="el" href="tsfs_8h_source.html#l00091">tsfs_file::end</a>, <a class="el" href="status__codes_8h_source.html#l00062">ERR_INVALID_ARG</a>, <a class="el" href="tsfs_8h_source.html#l00136">tsfs_filetable_entry::file_offset</a>, <a class="el" href="tsfs_8h_source.html#l00138">tsfs_filetable_entry::file_size</a>, <a class="el" href="tsfs_8h_source.html#l00157">tsfs::header</a>, <a class="el" href="tsfs_8h_source.html#l00109">tsfs_header::nr_files</a>, <a class="el" href="tsfs_8h_source.html#l00089">tsfs_file::start</a>, and <a class="el" href="status__codes_8h_source.html#l00054">STATUS_OK</a>.</p>

<p>Referenced by <a class="el" href="app__files_8c_source.html#l00305">screen_draw_file_list_from_index()</a>.</p>

</div>
</div>
<a class="anchor" id="ga921f07c71436c040d0354f283f0b693b"></a><!-- doxytag: member="tsfs.h::tsfs_read" ref="ga921f07c71436c040d0354f283f0b693b" args="(struct tsfs *tsfs, struct tsfs_file *file, void *buffer, uint32_t length, struct workqueue_task *task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a> tsfs_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structworkqueue__task.html">workqueue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>task</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads a chunk of data from a file to a buffer. </p>
<p>Any file system can only issue one read request at a time, and hence if the system is busy reading another file <em>tsfs_read</em> will return <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a8d4f409eda53a10f049dc6d5a833ccba">ERR_BUSY</a>. The user application should pick up on this and reschedule its read attempt.</p>
<p>The <em>task</em> is scheduled to execute once the copy operation is complete, but only if <em>tsfs_read</em> returns <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a7e4a42e3b6dd63708c64cf3db6f69566">STATUS_OK</a>. If it returns any error message, the task is <em>not</em> <em>scheduled</em>.</p>
<p>The <em>length</em> parameter is trimmed to never exceed the length of the file.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tsfs</em>&nbsp;</td><td>TSFS structure which holds file system information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>Handle of the file to be read from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to buffer where data is read to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Number of bytes to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>Task to be scheduled upon successful completion</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>\ref</em>&nbsp;</td><td>STATUS_OK if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>\ref</em>&nbsp;</td><td>ERR_INVALID_ARG if trying to read at the end of a file, or trying to read 0 bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>\ref</em>&nbsp;</td><td>ERR_BUSY if file system is busy reading from another file. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00317">317</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00122">tsfs_read_request::buffer</a>, <a class="el" href="tsfs_8h_source.html#l00183">tsfs::current_read_request</a>, <a class="el" href="tsfs_8h_source.html#l00124">tsfs_read_request::cursor</a>, <a class="el" href="tsfs_8h_source.html#l00093">tsfs_file::cursor</a>, <a class="el" href="tsfs_8h_source.html#l00091">tsfs_file::end</a>, <a class="el" href="status__codes_8h_source.html#l00064">ERR_BUSY</a>, <a class="el" href="status__codes_8h_source.html#l00062">ERR_INVALID_ARG</a>, <a class="el" href="util_8h_source.html#l00190">ilog2()</a>, <a class="el" href="tsfs_8h_source.html#l00180">tsfs::lba_in_buf</a>, <a class="el" href="tsfs_8h_source.html#l00126">tsfs_read_request::remaining_bytes</a>, <a class="el" href="tsfs_8h_source.html#l00155">tsfs::status</a>, <a class="el" href="status__codes_8h_source.html#l00054">STATUS_OK</a>, <a class="el" href="tsfs_8h_source.html#l00128">tsfs_read_request::task</a>, and <a class="el" href="tsfs_8h_source.html#l00079">TSFS_BLOCKSIZE</a>.</p>

<p>Referenced by <a class="el" href="file__loader_8c_source.html#l00155">load_to_hugemem_worker()</a>, and <a class="el" href="file__loader_8c_source.html#l00109">load_to_screen_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6a1322588844b9a57b941ea0198cf5be"></a><!-- doxytag: member="tsfs.c::tsfs_read_page_done" ref="ga6a1322588844b9a57b941ea0198cf5be" args="(struct block_device *bdev, struct block_request *breq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tsfs_read_page_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structblock__device.html">block_device</a> *&nbsp;</td>
          <td class="paramname"> <em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structblock__request.html">block_request</a> *&nbsp;</td>
          <td class="paramname"> <em>breq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Block device request complete callback. </p>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00076">76</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="block__core_8c_source.html#l00077">block_free_request()</a>, <a class="el" href="device_8h_source.html#l00098">block_request::context</a>, <a class="el" href="tsfs_8h_source.html#l00171">tsfs::current_breq</a>, and <a class="el" href="tsfs_8h_source.html#l00186">tsfs::page_read_callback</a>.</p>

</div>
</div>
<a class="anchor" id="ga48de8abfbf915d123a12f2c170c77afe"></a><!-- doxytag: member="tsfs.h::tsfs_seek" ref="ga48de8abfbf915d123a12f2c170c77afe" args="(struct tsfs_file *file, int32_t offset, enum tsfs_seek_origin origin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e">status_t</a> tsfs_seek </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs__file.html">tsfs_file</a> *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stdint__group.html#gafd12020da5a235dfcf0c3c748fb5baed">int32_t</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">tsfs_seek_origin</a>&nbsp;</td>
          <td class="paramname"> <em>origin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Manualy move the file cursor. </p>
<p>Available offsets are found in <a class="el" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">tsfs_seek_origin</a>. Note that to offset inwards from the end of the file, negative values should be used for <em>offset</em>. It is possible to seek the file cursor to any value, even invalid ones, so care should be taken when using this function. If an invalid value is passed for <em>origin</em>, the application will execute <a class="el" href="group__assert__group.html#ga3ac92363f706f624b3ff8b5489f8af05">unhandled_case()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>File to seek in </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Number of bytes to move the cursor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>origin</em>&nbsp;</td><td>Position from which offset is counted</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <a class="el" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a7e4a42e3b6dd63708c64cf3db6f69566">STATUS_OK</a> if successful </dd></dl>

<p>Definition at line <a class="el" href="tsfs_8c_source.html#l00442">442</a> of file <a class="el" href="tsfs_8c_source.html">tsfs.c</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00093">tsfs_file::cursor</a>, <a class="el" href="tsfs_8h_source.html#l00091">tsfs_file::end</a>, <a class="el" href="tsfs_8h_source.html#l00197">SEEK_CUR</a>, <a class="el" href="tsfs_8h_source.html#l00199">SEEK_END</a>, <a class="el" href="tsfs_8h_source.html#l00195">SEEK_SET</a>, <a class="el" href="tsfs_8h_source.html#l00089">tsfs_file::start</a>, <a class="el" href="status__codes_8h_source.html#l00054">STATUS_OK</a>, and <a class="el" href="assert_8h_source.html#l00100">unhandled_case</a>.</p>

</div>
</div>
<a class="anchor" id="gaeede48952c26734d9209530b8a8411ed"></a><!-- doxytag: member="tsfs.h::tsfs_volume_size" ref="gaeede48952c26734d9209530b8a8411ed" args="(struct tsfs *tsfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa">uint32_t</a> tsfs_volume_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtsfs.html">tsfs</a> *&nbsp;</td>
          <td class="paramname"> <em>tsfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the size of the entire volume. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The size of file system <em>tsfs</em> </dd></dl>

<p>Definition at line <a class="el" href="tsfs_8h_source.html#l00243">243</a> of file <a class="el" href="tsfs_8h_source.html">tsfs.h</a>.</p>

<p>References <a class="el" href="tsfs_8h_source.html#l00157">tsfs::header</a>, and <a class="el" href="tsfs_8h_source.html#l00107">tsfs_header::volume_size</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:10:00 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
