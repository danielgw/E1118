<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-demo: drivers/touch/resistive/touch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>drivers/touch/resistive/touch.c File Reference</h1>
<p>4-wire resistive touch driver general implementation.  
<a href="#_details">More...</a></p>
<code>#include &lt;<a class="el" href="assert_8h_source.html">assert.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="arch_2avr8_2include_2arch_2interrupt_8h_source.html">interrupt.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="chip_2atxmega128a1_2include_2chip_2pmic_8h_source.html">pmic.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="arch_2avr8_2include_2arch_2intc_8h_source.html">intc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="include_2touch_2touch_8h_source.html">touch/touch.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cpu_2xmega_2include_2cpu_2touch_2resistive_2touch_8h_source.html">cpu/touch/resistive/touch.h</a>&gt;</code><br/>

<p><a href="touch_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga26cb585c38924e15af35c61715295b64">touch_states</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64a9b439ee6bbe93f48a2f03fcd1c9e31a2">TOUCH_DISABLED</a>, 
<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64a2a15fb2114ef862a4aad6f0552ae8608">TOUCH_NOT_TOUCHED</a>, 
<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64a2dbc4da18407882abec0277b40a060c8">TOUCH_READING_X</a>, 
<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64aa30346c83e2fb4f08fc8717010a9f491">TOUCH_READING_Y</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64a8697229795a8fd3fb603f1897f321318">TOUCH_PROCESSING</a>, 
<a class="el" href="group__touch__driver__4wres__group.html#gga26cb585c38924e15af35c61715295b64a2f42c56ab2be76a40a9b183c5e44a0a8">TOUCH_TOUCHED</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Driver state names. </p>
 <a href="group__touch__driver__4wres__group.html#ga26cb585c38924e15af35c61715295b64">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#gac1765dec1f6af1e9479ec683263ff444">touch_priv_port_handler</a> (void *int_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interrupt handler for touch detection.  <a href="group__touch__driver__4wres__group.html#gac1765dec1f6af1e9479ec683263ff444"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#gade6427948348bcdf0d09ef27b42d43cc">touch_priv_adc_handler</a> (void *int_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interrupt handler for AD conversions.  <a href="group__touch__driver__4wres__group.html#gade6427948348bcdf0d09ef27b42d43cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga06d84a56017ffddde5a6ca405104f84b">touch_priv_process_samples</a> (void *int_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process touch samples.  <a href="group__touch__driver__4wres__group.html#ga06d84a56017ffddde5a6ca405104f84b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga14e34642aae7d0368c83fcd13b8886b5">touch_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the touch driver.  <a href="group__touch__driver__4wres__group.html#ga14e34642aae7d0368c83fcd13b8886b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga505fbacb97ab936941bacb1dd981ea62">touch_enable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable touch detection and sampling.  <a href="group__touch__driver__4wres__group.html#ga505fbacb97ab936941bacb1dd981ea62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga1e321414282d8aaaad64a4f0f5a9b3dd">touch_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable touch detection and sampling.  <a href="group__touch__driver__4wres__group.html#ga1e321414282d8aaaad64a4f0f5a9b3dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#gabdb00f69e258b9cf066834a6d713b7e6">touch_get_event</a> (struct <a class="el" href="structtouch__event.html">touch_event</a> *<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get last detected touch event from driver to buffer.  <a href="group__touch__driver__4wres__group.html#gabdb00f69e258b9cf066834a6d713b7e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga263c22bf1207f983e46b3741a1522418">touch_is_touched</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return current state of touch driver.  <a href="group__touch__driver__4wres__group.html#ga263c22bf1207f983e46b3741a1522418"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga9a76767292495609b40c1bc09dd4bca0">touch_set_event_handler</a> (<a class="el" href="group__touch__driver__group.html#ga9997e021ac69ab7889d6a480bf6fec36">touch_event_handler_t</a> handler)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set touch event handler for driver.  <a href="group__touch__driver__4wres__group.html#ga9a76767292495609b40c1bc09dd4bca0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__touch__driver__group.html#ga9997e021ac69ab7889d6a480bf6fec36">touch_event_handler_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga6df94f5d28e06f919c59c8c5c0ec176e">touch_get_event_handler</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current touch event handler from driver.  <a href="group__touch__driver__4wres__group.html#ga6df94f5d28e06f919c59c8c5c0ec176e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga76b43e12776395d5bbc721ada739a1fc">touch_set_calibration_matrix</a> (const struct <a class="el" href="structtouch__calibration__matrix.html">touch_calibration_matrix</a> *matrix)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assign a calibration matrix to the driver.  <a href="group__touch__driver__4wres__group.html#ga76b43e12776395d5bbc721ada739a1fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga50e86c1de06fafd31abd4912965eba8d">touch_get_calibration_matrix</a> (struct <a class="el" href="structtouch__calibration__matrix.html">touch_calibration_matrix</a> *<a class="el" href="structbuffer.html">buffer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy calibration matrix from driver to a buffer.  <a href="group__touch__driver__4wres__group.html#ga50e86c1de06fafd31abd4912965eba8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga0c7d9a5cd00838bb6360d9cc5b0796a4">touch_compute_calibration_matrix</a> (const <a class="el" href="group__touch__driver__group.html#gae9fc9c6436f3a1f04aa10efba6b834f6">touch_calibration_points_t</a> points, struct <a class="el" href="structtouch__calibration__matrix.html">touch_calibration_matrix</a> *matrix)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute a calibration matrix.  <a href="group__touch__driver__4wres__group.html#ga0c7d9a5cd00838bb6360d9cc5b0796a4"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Definition of interrupt handlers for touch detection and reading</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp57dad7adaa2ab845c063885da02cc939"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga702acb87546875c911d1d939c3501488"></a><!-- doxytag: member="touch.c::INTC_DEFINE_HANDLER" ref="ga702acb87546875c911d1d939c3501488" args="(CONFIG_TOUCH_PORT_IRQ_ID, touch_priv_port_handler, CONFIG_TOUCH_PORT_INTLVL)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>INTC_DEFINE_HANDLER</b> (CONFIG_TOUCH_PORT_IRQ_ID, touch_priv_port_handler, CONFIG_TOUCH_PORT_INTLVL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d471fafa9e8aaf764c4c08186b16ac2"></a><!-- doxytag: member="touch.c::INTC_DEFINE_HANDLER" ref="ga7d471fafa9e8aaf764c4c08186b16ac2" args="(CONFIG_TOUCH_ADC_IRQ_ID, touch_priv_adc_handler, CONFIG_TOUCH_ADC_INTLVL)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>INTC_DEFINE_HANDLER</b> (CONFIG_TOUCH_ADC_IRQ_ID, touch_priv_adc_handler, CONFIG_TOUCH_ADC_INTLVL)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="group__touch__driver__4wres__group.html#ga26cb585c38924e15af35c61715295b64">touch_states</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#gaab31de55d10044e6920039eabb36d673">touch_state</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current driver state.  <a href="group__touch__driver__4wres__group.html#gaab31de55d10044e6920039eabb36d673"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtouch__event.html">touch_event</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga9792410ce3e571b6fd33431fc514e26d">touch_last_event</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Last detected touch event.  <a href="group__touch__driver__4wres__group.html#ga9792410ce3e571b6fd33431fc514e26d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga4871f1b4881b69edb6f58e32b6f26fe2">touch_raw_x</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary raw sample value for X surface.  <a href="group__touch__driver__4wres__group.html#ga4871f1b4881b69edb6f58e32b6f26fe2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga56de60ec2feca20dca793d0b0a4cbf34">touch_raw_y</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary raw sample value for Y surface.  <a href="group__touch__driver__4wres__group.html#ga56de60ec2feca20dca793d0b0a4cbf34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <br class="typebreak"/>
<a class="el" href="structtouch__calibration__matrix.html">touch_calibration_matrix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga2a3ab0eb0e5bbd526bab6921ee1cb1d8">touch_matrix</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calibration matrix for the driver.  <a href="group__touch__driver__4wres__group.html#ga2a3ab0eb0e5bbd526bab6921ee1cb1d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__touch__driver__group.html#ga9997e021ac69ab7889d6a480bf6fec36">touch_event_handler_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__touch__driver__4wres__group.html#ga850a1485c663f53fc346c8d607aa25b6">touch_event_handler</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current touch event handler (set to NULL if no handler should be called).  <a href="group__touch__driver__4wres__group.html#ga850a1485c663f53fc346c8d607aa25b6"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>4-wire resistive touch driver general implementation. </p>
<p>Copyright (C) 2009 Atmel Corporation. All rights reserved. </p>

<p>Definition in file <a class="el" href="touch_8c_source.html">touch.c</a>.</p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 14:09:58 2010 for display-demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
