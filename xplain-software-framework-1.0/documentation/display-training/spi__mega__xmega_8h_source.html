<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-training: include/spi/spi_mega_xmega.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/spi/spi_mega_xmega.h</h1><a href="spi__mega__xmega_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef SPI_SPI_MEGA_XMEGA_H_INCLUDED</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define SPI_SPI_MEGA_XMEGA_H_INCLUDED</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="assert_8h.html" title="Run-time and build-time assertion support.">assert.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;stdbool.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="buffer_8h.html" title="Generic Buffer structure and associated helper functions.">buffer.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="board_2xplain_2include_2board_2spi_8h.html" title="Board-specific SPI control.">board/spi.h</a>&gt;</span>
<a name="l00045"></a>00045 
<a name="l00181"></a>00181 <span class="keywordtype">void</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gaca8f508d7a0052618f5f2059e4f0e9b6" title="Private init SPI master.">spi_priv_master_init</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id, <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master);
<a name="l00182"></a>00182 
<a name="l00192"></a>00192 <span class="keywordtype">void</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#ga0a87144e120106f3a590f7d830c85016" title="Private setup SPI device.">spi_priv_master_setup_device</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id, <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *device,
<a name="l00193"></a>00193                 <a class="code" href="group__spi__xmega__internal__group.html#ga781db101a4c4490735eb12d3cb92fde7" title="SPI setup flags.">spi_flags_t</a> flags, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> baud_rate,
<a name="l00194"></a>00194                 <a class="code" href="board_2xplain_2include_2board_2spi_8h.html#a2b0fdae4392e5ea70eb2c238bdf1feb4" title="Board SPI select identifier type.">board_spi_select_id_t</a> sel_id);
<a name="l00195"></a>00195 
<a name="l00202"></a>00202 <span class="keywordtype">void</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gad4a6a264b2a801b45318c296edd89492" title="Private select SPI device.">spi_priv_select_device</a>(<span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00203"></a>00203                 <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *device);
<a name="l00204"></a>00204 
<a name="l00211"></a>00211 <span class="keywordtype">void</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gabfe0503428169df266243cc786c8fe3f" title="Private deselect SPI device.">spi_priv_deselect_device</a>(<span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00212"></a>00212                 <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *device);
<a name="l00213"></a>00213 
<a name="l00232"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23">00232</a> <span class="preprocessor">#define spi_id_is_valid(spi_id) (spi_id &lt;= SPI_ID_LAST)</span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>
<a name="l00249"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#ga916159d2d86f282460dcf6fb4ea74e0a">00249</a> <span class="preprocessor">#define SPI_MASTER_TYPE_NAME(spi_id)    spi_master_type##spi_id</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span>
<a name="l00257"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#gab0ec5af64079338940efb18f8284519d">00257</a> <span class="preprocessor">#define DECLARE_SPI_MASTER(spi_id, varname) \</span>
<a name="l00258"></a>00258 <span class="preprocessor">        struct SPI_MASTER_TYPE_NAME(spi_id) varname</span>
<a name="l00259"></a>00259 <span class="preprocessor"></span>
<a name="l00274"></a>00274 <span class="preprocessor">#if SPI_ID_NATIVE_IS_ENABLED &amp;&amp; !SPI_ID_UART_IS_ENABLED</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span><span class="preprocessor"># define SPI_MUX(spi_id, native, uart) native</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span><span class="preprocessor">#elif SPI_ID_UART_IS_ENABLED &amp;&amp; !SPI_ID_NATIVE_IS_ENABLED</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span><span class="preprocessor"># define SPI_MUX(spi_id, native, uart) uart</span>
<a name="l00278"></a>00278 <span class="preprocessor"></span><span class="preprocessor">#elif SPI_ID_NATIVE_IS_ENABLED &amp;&amp; SPI_ID_UART_IS_ENABLED</span>
<a name="l00279"></a>00279 <span class="preprocessor"></span><span class="preprocessor"># define SPI_MUX(spi_id, native, uart)  \</span>
<a name="l00280"></a>00280 <span class="preprocessor">        if (spi_id &lt; SPI_ID_UART_FIRST) \</span>
<a name="l00281"></a>00281 <span class="preprocessor">                native;                 \</span>
<a name="l00282"></a>00282 <span class="preprocessor">        else                            \</span>
<a name="l00283"></a>00283 <span class="preprocessor">                uart</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00285"></a>00285 <span class="preprocessor"></span><span class="preprocessor"># error No SPI ID enabled!</span>
<a name="l00286"></a>00286 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span>
<a name="l00294"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#ga93a61dce55506d09949605302cbe78d3">00294</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *<a class="code" href="group__spi__mega__xmega__internal__group.html#ga93a61dce55506d09949605302cbe78d3" title="Multiplex statements based on spi_id.">spi_master_get_base</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00295"></a>00295                 <span class="keywordtype">void</span> *priv)
<a name="l00296"></a>00296 {
<a name="l00297"></a>00297         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         SPI_MUX(spi_id,
<a name="l00300"></a>00300                 <span class="keywordflow">return</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#ga0378847cb9590cee83bbe446f0d17958" title="Get base definition of spi_master.">SPI_MASTER_NATIVE_GET_BASE</a>(priv),
<a name="l00301"></a>00301                 <span class="keywordflow">return</span> NULL);
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00309"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#gac337fe2f8278daddac93f1de167c0850">00309</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gac337fe2f8278daddac93f1de167c0850" title="Get spi_master derived struct size for the given SPI Module ID.">spi_master_get_size</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id)
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00312"></a>00312 
<a name="l00313"></a>00313         SPI_MUX(spi_id,
<a name="l00314"></a>00314                 <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="group__spi__xmega__internal__group.html#gac3deb3626b7aa9e946e7beb0da063406" title="Type defintion for spi_master derivation.">SPI_MASTER_NATIVE_TYPE</a>),
<a name="l00315"></a>00315                 <span class="keywordflow">return</span> 0);
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00323"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#gafeac455155a9e246a6d63c8ac22dfdef">00323</a> <span class="preprocessor">#define SPI_DEVICE_TYPE_NAME(spi_id)    spi_device_type##spi_id</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span>
<a name="l00331"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#ga476d6b55f4566e051486bee13ab0552c">00331</a> <span class="preprocessor">#define DECLARE_SPI_DEVICE(spi_id, varname) \</span>
<a name="l00332"></a>00332 <span class="preprocessor">        struct SPI_DEVICE_TYPE_NAME(spi_id) varname</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span>
<a name="l00340"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#gad343f1dec6774a649c07a93bc21a8e2b">00340</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *<a class="code" href="group__spi__mega__xmega__internal__group.html#gad343f1dec6774a649c07a93bc21a8e2b" title="Get base defintion of spi_device.">spi_device_get_base</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00341"></a>00341                 <span class="keywordtype">void</span> *priv)
<a name="l00342"></a>00342 {
<a name="l00343"></a>00343         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00344"></a>00344 
<a name="l00345"></a>00345         SPI_MUX(spi_id,
<a name="l00346"></a>00346                 <span class="keywordflow">return</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gaab21f9c57c3890b902ca84bcddd7bed4" title="Get base definition of native spi_device.">SPI_DEVICE_NATIVE_GET_BASE</a>(priv),
<a name="l00347"></a>00347                 <span class="keywordflow">return</span> NULL);
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00355"></a><a class="code" href="group__spi__mega__xmega__internal__group.html#gaef2aa8543289f060cb84e4a25afc44c9">00355</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#gaef2aa8543289f060cb84e4a25afc44c9" title="Get spi_device derived struct size for the given SPI Module ID.">spi_device_get_size</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id)
<a name="l00356"></a>00356 {
<a name="l00357"></a>00357         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00358"></a>00358 
<a name="l00359"></a>00359         SPI_MUX(spi_id,
<a name="l00360"></a>00360                 <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="group__spi__xmega__internal__group.html#gabd297dc285664141f09a95e8f4c665a8" title="Type defintion for native spi_device derivation.">SPI_DEVICE_NATIVE_TYPE</a>),
<a name="l00361"></a>00361                 <span class="keywordflow">return</span> 0);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="group__spi__group.html#gac828b494f3749583554b8f974497fec3">00364</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#gac828b494f3749583554b8f974497fec3" title="Enable SPI module.">spi_enable</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id)
<a name="l00365"></a>00365 {
<a name="l00366"></a>00366         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         SPI_MUX(spi_id,
<a name="l00369"></a>00369                 <a class="code" href="group__spi__mega__xmega__internal__group.html#ga9d59ed5596a6b01cabde202f5be72dc7" title="Private SPI enable.">spi_priv_enable</a>(spi_id),
<a name="l00370"></a>00370                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="group__spi__group.html#ga1d74d0392be7db060fad2d72a256d009">00373</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga1d74d0392be7db060fad2d72a256d009" title="Disable SPI module.">spi_disable</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00376"></a>00376 
<a name="l00377"></a>00377         SPI_MUX(spi_id,
<a name="l00378"></a>00378                 <a class="code" href="group__spi__mega__xmega__internal__group.html#ga2935171be3d996cc34131106b725f92d" title="Private SPI disable.">spi_priv_disable</a>(spi_id),
<a name="l00379"></a>00379                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="group__spi__group.html#ga767870986d7e09d65fbf7472f0c3dbfb">00382</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__spi__group.html#ga767870986d7e09d65fbf7472f0c3dbfb" title="Check if SPI module is enabled.">spi_is_enabled</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id)
<a name="l00383"></a>00383 {
<a name="l00384"></a>00384         <a class="code" href="group__assert__group.html#gacdcc5aaebf3f273c1762f24a6ece2e5e" title="Assert that condition is true at run time.">assert</a>(<a class="code" href="group__spi__mega__xmega__internal__group.html#ga88f27c5e8d494a3c1b585cfa9d4e1c23" title="Test if SPI Module ID is valid.">spi_id_is_valid</a>(spi_id));
<a name="l00385"></a>00385 
<a name="l00386"></a>00386         SPI_MUX(spi_id,
<a name="l00387"></a>00387                 <span class="keywordflow">return</span> <a class="code" href="group__spi__mega__xmega__internal__group.html#ga90a22f2a10cfd3f63779a80be83ab73d" title="Private SPI is enabled.">spi_priv_is_enabled</a>(spi_id),
<a name="l00388"></a>00388                 <span class="keywordflow">return</span> <span class="keyword">false</span>);
<a name="l00389"></a>00389 }
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="group__spi__group.html#ga328a23529029373191d5fc4006e8dfcb">00391</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga328a23529029373191d5fc4006e8dfcb" title="Initialize SPI module in master mode.">spi_master_init</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00392"></a>00392                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *<a class="code" href="structspi__master.html" title="SPI master.">spi_master</a>)
<a name="l00393"></a>00393 {
<a name="l00394"></a>00394         SPI_MUX(spi_id,
<a name="l00395"></a>00395                 <a class="code" href="group__spi__mega__xmega__internal__group.html#gaca8f508d7a0052618f5f2059e4f0e9b6" title="Private init SPI master.">spi_priv_master_init</a>(spi_id, spi_master),
<a name="l00396"></a>00396                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00397"></a>00397 }
<a name="l00398"></a>00398 
<a name="l00399"></a><a class="code" href="group__spi__group.html#ga885cd9c7fdbbac2c147d439caa37df84">00399</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga885cd9c7fdbbac2c147d439caa37df84" title="Setup a SPI device.">spi_master_setup_device</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00400"></a>00400                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *<a class="code" href="structspi__master.html" title="SPI master.">spi_master</a>, <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *<a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a>,
<a name="l00401"></a>00401                 <a class="code" href="group__spi__xmega__internal__group.html#ga781db101a4c4490735eb12d3cb92fde7" title="SPI setup flags.">spi_flags_t</a> flags, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> baud_rate,
<a name="l00402"></a>00402                 <a class="code" href="board_2xplain_2include_2board_2spi_8h.html#a2b0fdae4392e5ea70eb2c238bdf1feb4" title="Board SPI select identifier type.">board_spi_select_id_t</a> sel_id)
<a name="l00403"></a>00403 {
<a name="l00404"></a>00404         SPI_MUX(spi_id,
<a name="l00405"></a>00405                 <a class="code" href="group__spi__mega__xmega__internal__group.html#ga0a87144e120106f3a590f7d830c85016" title="Private setup SPI device.">spi_priv_master_setup_device</a>(spi_id, spi_device, flags,
<a name="l00406"></a>00406                                 baud_rate, sel_id),
<a name="l00407"></a>00407                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a><a class="code" href="group__spi__group.html#gabedc3a32fd102976a04e91c90ff61021">00410</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#gabedc3a32fd102976a04e91c90ff61021" title="Select given device on the SPI bus.">spi_select_device</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00411"></a>00411                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master, <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *device)
<a name="l00412"></a>00412 {
<a name="l00413"></a>00413         SPI_MUX(spi_id,
<a name="l00414"></a>00414                 <a class="code" href="group__spi__mega__xmega__internal__group.html#gad4a6a264b2a801b45318c296edd89492" title="Private select SPI device.">spi_priv_select_device</a>(master, device),
<a name="l00415"></a>00415                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="group__spi__group.html#gafa781b82d01b3f8aacc1dcb97ba99e76">00418</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#gafa781b82d01b3f8aacc1dcb97ba99e76" title="Deselect given device on the SPI bus.">spi_deselect_device</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00419"></a>00419                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master, <span class="keyword">struct</span> <a class="code" href="structspi__device.html" title="Polled SPI device defintion.">spi_device</a> *device)
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421         SPI_MUX(spi_id,
<a name="l00422"></a>00422                 <a class="code" href="group__spi__mega__xmega__internal__group.html#gabfe0503428169df266243cc786c8fe3f" title="Private deselect SPI device.">spi_priv_deselect_device</a>(master, device),
<a name="l00423"></a>00423                 <span class="keywordflow">do</span> {} <span class="keywordflow">while</span> (0));
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="group__spi__group.html#gab8e1df9f3a51cc26bff61f9b11067971">00426</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#gab8e1df9f3a51cc26bff61f9b11067971" title="Send a sequence of bytes to a SPI device.">spi_write</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id, <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00427"></a>00427                 <span class="keyword">const</span> <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> *data, <span class="keywordtype">size_t</span> len)
<a name="l00428"></a>00428 {
<a name="l00429"></a>00429         <a class="code" href="group__spi__polled__internal__group.html#ga36da98c10e6d372804b6d90c8bda7de2">spi_polled_write</a>(master, data, len);
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00432"></a><a class="code" href="group__spi__group.html#ga5c1c808de03e6c27004b6fb186c30575">00432</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga5c1c808de03e6c27004b6fb186c30575" title="Receive a sequence of bytes from a SPI device.">spi_read</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id, <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00433"></a>00433                 <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> *data, <span class="keywordtype">size_t</span> len)
<a name="l00434"></a>00434 {
<a name="l00435"></a>00435         <a class="code" href="group__spi__polled__internal__group.html#ga0e843b724dd93a32b9adae509fc6d32f">spi_polled_read</a>(master, data, len);
<a name="l00436"></a>00436 }
<a name="l00437"></a>00437 
<a name="l00438"></a><a class="code" href="group__spi__group.html#ga0d5712e90d9184b4ff743361020fbf7c">00438</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga0d5712e90d9184b4ff743361020fbf7c" title="Send/Receive a sequence of bytes to/from a SPI device.">spi_exchange</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id, <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00439"></a>00439                 <span class="keyword">const</span> <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> *write, <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> *read, <span class="keywordtype">size_t</span> len)
<a name="l00440"></a>00440 {
<a name="l00441"></a>00441         <a class="code" href="group__spi__polled__internal__group.html#ga5d4a08f4f177344394741ba229e91326">spi_polled_exchange</a>(master, write, read, len);
<a name="l00442"></a>00442 }
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="group__spi__group.html#ga65d1094f0d0fe8d9cc98edb30184b7d2">00444</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga65d1094f0d0fe8d9cc98edb30184b7d2" title="Send bytes from a list of buffers to a SPI device.">spi_write_buf_list</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00445"></a>00445                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master, <span class="keyword">struct</span> <a class="code" href="structslist.html" title="A singly linked list.">slist</a> *buf_list)
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447         <a class="code" href="group__spi__polled__internal__group.html#ga3b272ca277292b2c98c81289b3f17f1d">spi_polled_write_buf_list</a>(master, buf_list);
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="group__spi__group.html#gad5742f5830a98948d82a319493ec7567">00450</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#gad5742f5830a98948d82a319493ec7567" title="Receive bytes into a list of buffers from a SPI device.">spi_read_buf_list</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00451"></a>00451                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master, <span class="keyword">struct</span> <a class="code" href="structslist.html" title="A singly linked list.">slist</a> *buf_list)
<a name="l00452"></a>00452 {
<a name="l00453"></a>00453         <a class="code" href="group__spi__polled__internal__group.html#ga76c72ead3f948b525f99ae12e6cccdf3">spi_polled_read_buf_list</a>(master, buf_list);
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 
<a name="l00456"></a><a class="code" href="group__spi__group.html#ga4f88493bc81159009cfe69580728ba1a">00456</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga4f88493bc81159009cfe69580728ba1a" title="Send/Receive a list of buffers to/from a SPI device.">spi_exchange_buf_list</a>(<a class="code" href="group__spi__xmega__internal__group.html#ga59eca0ea1cb53b57e414dbadee990e1e" title="SPI Module ID">spi_id_t</a> spi_id,
<a name="l00457"></a>00457                 <span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master, <span class="keyword">struct</span> <a class="code" href="structslist.html" title="A singly linked list.">slist</a> *write_buf_list,
<a name="l00458"></a>00458                 <span class="keyword">struct</span> <a class="code" href="structslist.html" title="A singly linked list.">slist</a> *read_buf_list)
<a name="l00459"></a>00459 {
<a name="l00460"></a>00460         <a class="code" href="group__spi__polled__internal__group.html#ga2279b032712b6c5f50d0309ede7013c0">spi_polled_exchange_buf_list</a>(master, write_buf_list, read_buf_list);
<a name="l00461"></a>00461 }
<a name="l00462"></a>00462 
<a name="l00464"></a>00464 <span class="preprocessor">#endif </span><span class="comment">/* SPI_SPI_MEGA_XMEGA_H_INCLUDED */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 29 15:18:21 2010 for display-training by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
