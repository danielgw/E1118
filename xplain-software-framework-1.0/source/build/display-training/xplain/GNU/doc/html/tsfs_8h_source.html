<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-training: include/fs/tsfs.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">display-training</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>include/fs/tsfs.h</h1>  </div>
</div>
<div class="contents">
<a href="tsfs_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef FS_TSFS_H</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define FS_TSFS_H</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;mainloop.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;status_codes.h&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;block/device.h&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef CONFIG_FS_TSFS_USE_HUGEMEM</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor"># include &lt;hugemem.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#endif</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="group__tsfs__group.html#gaa994d078556dd7130b291230548d0008">00066</a> <span class="preprocessor">#define TSFS_ID                 0x17c1</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="group__tsfs__group.html#ga9fd4f8fe49119798137c73fa0ba43eb6">00068</a> <span class="preprocessor">#define TSFS_FILENAME_LEN       8</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00070"></a>00070 <span class="preprocessor">#ifdef CONFIG_FS_TSFS_USE_HUGEMEM</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072 <span class="preprocessor"># define TSFS_MAX_FILES         256</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span>
<a name="l00075"></a><a class="code" href="group__tsfs__group.html#gac30577e97437b13a6ff2bcbb8e7f5478">00075</a> <span class="preprocessor"># define TSFS_MAX_FILES         31</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00079"></a><a class="code" href="group__tsfs__group.html#gaea54e12350dec9cfc24593c9711047ba">00079</a> <span class="preprocessor">#define TSFS_BLOCKSIZE          512</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="preprocessor">#define TSFS_FILETABLE_ENTRIES_PER_BLOCK \</span>
<a name="l00082"></a>00082 <span class="preprocessor">        (TSFS_BLOCKSIZE / (sizeof(struct tsfs_filetable_entry)))</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00087"></a><a class="code" href="structtsfs__file.html">00087</a> <span class="keyword">struct </span><a class="code" href="structtsfs__file.html" title="Holds information about a specific file within a file system.">tsfs_file</a> {
<a name="l00089"></a><a class="code" href="structtsfs__file.html#a58071d2a879b3739d7007a113e19999c">00089</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__file.html#a58071d2a879b3739d7007a113e19999c" title="Address in storage where file starts.">start</a>;
<a name="l00091"></a><a class="code" href="structtsfs__file.html#a98f167f18585bf4db51cffd025c3da24">00091</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__file.html#a98f167f18585bf4db51cffd025c3da24" title="Address in storage where file ends.">end</a>;
<a name="l00093"></a><a class="code" href="structtsfs__file.html#ac6127249e37fb902638bba4c016c6ce0">00093</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__file.html#ac6127249e37fb902638bba4c016c6ce0" title="Pointer to next data to be read.">cursor</a>;
<a name="l00094"></a>00094 };
<a name="l00095"></a>00095 
<a name="l00099"></a><a class="code" href="structtsfs__header.html">00099</a> <span class="keyword">struct </span><a class="code" href="structtsfs__header.html" title="Header structure. Holds generic information about the file system.">tsfs_header</a> {
<a name="l00101"></a><a class="code" href="structtsfs__header.html#a7f955b4a39f36c2f059688a67fba290d">00101</a>         <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a>        <a class="code" href="structtsfs__header.html#a7f955b4a39f36c2f059688a67fba290d" title="Two unique ID bytes to identify TSFS.">id</a>;
<a name="l00103"></a><a class="code" href="structtsfs__header.html#a1e4e68bb7965a64e7c034ee87b525ed1">00103</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a>         <a class="code" href="structtsfs__header.html#a1e4e68bb7965a64e7c034ee87b525ed1" title="TSFS version.">version</a>;
<a name="l00105"></a><a class="code" href="structtsfs__header.html#a841d6cdb514b2c3a902555d941c1e4b8">00105</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a>         <a class="code" href="structtsfs__header.html#a841d6cdb514b2c3a902555d941c1e4b8" title="Rereved for future use.">reserved1</a>;
<a name="l00107"></a><a class="code" href="structtsfs__header.html#aa78d1e5516b5c39e7f2d0498cefb5650">00107</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__header.html#aa78d1e5516b5c39e7f2d0498cefb5650" title="Size of entire volume, including header.">volume_size</a>;
<a name="l00109"></a><a class="code" href="structtsfs__header.html#ab3d3d350beee3446a833b3d67800aa82">00109</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__header.html#ab3d3d350beee3446a833b3d67800aa82" title="Number of files in the system.">nr_files</a>;
<a name="l00111"></a><a class="code" href="structtsfs__header.html#a5253b002afe9becd5f056a3b36a5070b">00111</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__header.html#a5253b002afe9becd5f056a3b36a5070b" title="Rereved for future use.">reserved2</a>;
<a name="l00112"></a>00112 };
<a name="l00113"></a>00113 
<a name="l00117"></a><a class="code" href="structtsfs__read__request.html">00117</a> <span class="keyword">struct </span><a class="code" href="structtsfs__read__request.html" title="Holds current read request being processed by a file system.">tsfs_read_request</a> {
<a name="l00122"></a><a class="code" href="structtsfs__read__request.html#a306e115f02f519bd0f57edc1c5c8c77c">00122</a>         <span class="keywordtype">void</span>                    *<a class="code" href="structtsfs__read__request.html#a306e115f02f519bd0f57edc1c5c8c77c">buffer</a>;
<a name="l00124"></a><a class="code" href="structtsfs__read__request.html#a93ed27ba428e48fbf84ae101ab98bf35">00124</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>                <a class="code" href="structtsfs__read__request.html#a93ed27ba428e48fbf84ae101ab98bf35" title="Pointer to next data byte to be read.">cursor</a>;
<a name="l00126"></a><a class="code" href="structtsfs__read__request.html#a7d2e067e29d1dee2cfc5b1ab2640c43d">00126</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>                <a class="code" href="structtsfs__read__request.html#a7d2e067e29d1dee2cfc5b1ab2640c43d" title="Number of bytes remaining in transfer.">remaining_bytes</a>;
<a name="l00128"></a><a class="code" href="structtsfs__read__request.html#a9129529dacbb0f517f4631f257239311">00128</a>         <span class="keyword">struct </span><a class="code" href="structworkqueue__task.html" title="Task to be run from a work queue.">workqueue_task</a>   *<a class="code" href="structtsfs__read__request.html#a9129529dacbb0f517f4631f257239311" title="Task to be scheduled after operation is complete.">task</a>;
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 
<a name="l00134"></a><a class="code" href="structtsfs__filetable__entry.html">00134</a> <span class="keyword">struct </span><a class="code" href="structtsfs__filetable__entry.html" title="Holds information on one file in the file table.">tsfs_filetable_entry</a> {
<a name="l00136"></a><a class="code" href="structtsfs__filetable__entry.html#a27ae977051d0ddf8c08a9ac677463bfe">00136</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__filetable__entry.html#a27ae977051d0ddf8c08a9ac677463bfe" title="Offset in media file starts.">file_offset</a>;
<a name="l00138"></a><a class="code" href="structtsfs__filetable__entry.html#a3b13e3bddda8dfc74eb2290b6901d9d8">00138</a>         <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a>        <a class="code" href="structtsfs__filetable__entry.html#a3b13e3bddda8dfc74eb2290b6901d9d8" title="Size of file in bytes.">file_size</a>;
<a name="l00139"></a>00139 
<a name="l00147"></a><a class="code" href="structtsfs__filetable__entry.html#a5dee71d37b6e5a310d66853bff5bddb3">00147</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a>         <a class="code" href="structtsfs__filetable__entry.html#a5dee71d37b6e5a310d66853bff5bddb3" title="Name of the file on the volume.">filename</a>[<a class="code" href="group__tsfs__group.html#ga9fd4f8fe49119798137c73fa0ba43eb6" title="Max characters in a filename.">TSFS_FILENAME_LEN</a>];
<a name="l00148"></a>00148 };
<a name="l00149"></a>00149 
<a name="l00153"></a><a class="code" href="structtsfs.html">00153</a> <span class="keyword">struct </span><a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> {
<a name="l00155"></a><a class="code" href="structtsfs.html#a161d7247c15580ef5410daf6f9a1b290">00155</a>         <span class="keyword">enum</span> <a class="code" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151">status_code</a>                <a class="code" href="structtsfs.html#a161d7247c15580ef5410daf6f9a1b290" title="Current state of file system, for valid states see enum tsfs_status.">status</a>;
<a name="l00157"></a><a class="code" href="structtsfs.html#a1f870362039d7332fa689b890af0ca6f">00157</a>         <span class="keyword">struct </span><a class="code" href="structtsfs__header.html" title="Header structure. Holds generic information about the file system.">tsfs_header</a>              <a class="code" href="structtsfs.html#a1f870362039d7332fa689b890af0ca6f" title="TSFS header data.">header</a>;
<a name="l00158"></a>00158 
<a name="l00160"></a>00160 <span class="preprocessor">#ifdef CONFIG_FS_TSFS_USE_HUGEMEM</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span>        <a class="code" href="group__hugemem__group.html#gad1f5b6899e22cd9bc4787ad502314968" title="Type to use for pointers to huge memory.">hugemem_ptr_t</a>                   filetable_address;
<a name="l00162"></a>00162         <a class="code" href="group__stdint__group.html#ga5a8b2dc9e45a9ee81a94ef304fb62505" title="16-bit unsigned integer">uint16_t</a>                        filetable_entries_read;
<a name="l00163"></a>00163 <span class="preprocessor">#else</span>
<a name="l00164"></a><a class="code" href="structtsfs.html#a94e8ac4420f01fe146bd111b6c66b223">00164</a> <span class="preprocessor"></span>        <span class="keyword">struct </span><a class="code" href="structtsfs__filetable__entry.html" title="Holds information on one file in the file table.">tsfs_filetable_entry</a>     <a class="code" href="structtsfs.html#a94e8ac4420f01fe146bd111b6c66b223" title="Table over all files present in file system. V1 max is 31 files.">filetable</a>[<a class="code" href="group__tsfs__group.html#gac30577e97437b13a6ff2bcbb8e7f5478" title="Max number of files supported.">TSFS_MAX_FILES</a>];
<a name="l00165"></a>00165 <span class="preprocessor">#endif</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00168"></a><a class="code" href="structtsfs.html#a3897f4825919b933bbba1eec80bb2362">00168</a>         <span class="keyword">struct </span><a class="code" href="structblock__device.html" title="A block device.">block_device</a>             *<a class="code" href="structtsfs.html#a3897f4825919b933bbba1eec80bb2362" title="Pointer to file system&amp;#39;s associated block device.">bdev</a>;
<a name="l00169"></a>00169 
<a name="l00171"></a><a class="code" href="structtsfs.html#a3e955542880feeb043162994a29f947c">00171</a>         <span class="keyword">struct </span><a class="code" href="structblock__request.html" title="A block device request.">block_request</a>            *<a class="code" href="structtsfs.html#a3e955542880feeb043162994a29f947c" title="Current block issued request.">current_breq</a>;
<a name="l00172"></a>00172 
<a name="l00174"></a><a class="code" href="structtsfs.html#ae9258d2e4eff0591faa0dbc20414a220">00174</a>         <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a>                         *<a class="code" href="structtsfs.html#ae9258d2e4eff0591faa0dbc20414a220" title="Buffer to hold block page cache.">buffer_data</a>;
<a name="l00175"></a>00175 
<a name="l00177"></a><a class="code" href="structtsfs.html#a1abf088d71a731ecbd0302120e03c82e">00177</a>         <span class="keyword">struct </span><a class="code" href="structbuffer.html" title="A generic data buffer.">buffer</a>                   <a class="code" href="structbuffer.html" title="A generic data buffer.">buffer</a>;
<a name="l00178"></a>00178 
<a name="l00180"></a><a class="code" href="structtsfs.html#aae6e804428da2444e75b81f35a3cc66c">00180</a>         <a class="code" href="group__block__device__group.html#ga7495726fae831c474d600b34d8d81bf5" title="Type for holding a logical block address (LBA)">block_addr_t</a>                    <a class="code" href="structtsfs.html#aae6e804428da2444e75b81f35a3cc66c" title="Number of block-page currently in the tsfs::buffer.">lba_in_buf</a>;
<a name="l00181"></a>00181 
<a name="l00183"></a><a class="code" href="structtsfs.html#aba664d1edbb82853447eb029271586d7">00183</a>         <span class="keyword">struct </span><a class="code" href="structtsfs__read__request.html" title="Holds current read request being processed by a file system.">tsfs_read_request</a>        <a class="code" href="structtsfs.html#aba664d1edbb82853447eb029271586d7" title="Read request currently being handled.">current_read_request</a>;
<a name="l00184"></a>00184 
<a name="l00186"></a><a class="code" href="structtsfs.html#a397f0feb5c480dea471d807efe10259c">00186</a>         void(*<a class="code" href="structtsfs.html#a397f0feb5c480dea471d807efe10259c" title="Internal callback when block device completes a read operation.">page_read_callback</a>)(<span class="keyword">struct </span><a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>);
<a name="l00187"></a>00187 };
<a name="l00188"></a>00188 
<a name="l00193"></a><a class="code" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7">00193</a> <span class="keyword">enum</span> <a class="code" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7" title="The relative starting point of seek operations.">tsfs_seek_origin</a> {
<a name="l00195"></a><a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a7f53e3798ec48e79c0897ba5138f9b05">00195</a>         <a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a7f53e3798ec48e79c0897ba5138f9b05" title="Seek relative to beginning of file.">SEEK_SET</a>,
<a name="l00197"></a><a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7af3091144c125782cf17bcd3eb84e454c">00197</a>         <a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7af3091144c125782cf17bcd3eb84e454c" title="Seek relative to current cursor position.">SEEK_CUR</a>,
<a name="l00199"></a><a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a060e45245be703e272d7264bafcfdc63">00199</a>         <a class="code" href="group__tsfs__group.html#ggac9fdea7a0fdac8a11439440bdea0d2f7a060e45245be703e272d7264bafcfdc63" title="Seek relative to end of file.">SEEK_END</a>,
<a name="l00200"></a>00200 };
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> <a class="code" href="group__tsfs__group.html#gae87db1013103ee0211bd317146977f28" title="Initiates a Tiny Simple File System.">tsfs_init</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>, <span class="keyword">struct</span> <a class="code" href="structblock__device.html" title="A block device.">block_device</a> *system_blockdevice,
<a name="l00203"></a>00203                 <span class="keyword">struct</span> <a class="code" href="structworkqueue__task.html" title="Task to be run from a work queue.">workqueue_task</a> *system_ready_task);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> <a class="code" href="group__tsfs__group.html#ga9f0be6fc875a8b14bd8647c1d473fdde" title="Opens a file by populating a file handle.">tsfs_open</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename,
<a name="l00206"></a>00206                 <span class="keyword">struct</span> <a class="code" href="structtsfs__file.html" title="Holds information about a specific file within a file system.">tsfs_file</a> *filehandle);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> <a class="code" href="group__tsfs__group.html#ga48de8abfbf915d123a12f2c170c77afe" title="Manualy move the file cursor.">tsfs_seek</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs__file.html" title="Holds information about a specific file within a file system.">tsfs_file</a> *file, <a class="code" href="group__stdint__group.html#gafd12020da5a235dfcf0c3c748fb5baed" title="32-bit signed integer">int32_t</a> offset,
<a name="l00209"></a>00209                 <span class="keyword">enum</span> <a class="code" href="group__tsfs__group.html#gac9fdea7a0fdac8a11439440bdea0d2f7" title="The relative starting point of seek operations.">tsfs_seek_origin</a> origin);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <a class="code" href="types_8h.html#a933a3d656c26da40d944fa70ea43a72e" title="Status return value.">status_t</a> <a class="code" href="group__tsfs__group.html#ga921f07c71436c040d0354f283f0b693b" title="Reads a chunk of data from a file to a buffer.">tsfs_read</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>, <span class="keyword">struct</span> <a class="code" href="structtsfs__file.html" title="Holds information about a specific file within a file system.">tsfs_file</a> *file,
<a name="l00212"></a>00212                 <span class="keywordtype">void</span> *<a class="code" href="structbuffer.html" title="A generic data buffer.">buffer</a>, <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> length,
<a name="l00213"></a>00213                 <span class="keyword">struct</span> <a class="code" href="structworkqueue__task.html" title="Task to be run from a work queue.">workqueue_task</a> *task);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="keywordtype">void</span> <a class="code" href="group__tsfs__group.html#gaab9c9ffdd0717336e1ccac397e158f06" title="Reads the filename of an indexed file into a buffer.">tsfs_get_filename</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>, <a class="code" href="group__stdint__group.html#ga381e0b283f5c3d9f7e88e6aeb43c29f5" title="Fastest unsigned integer with at least 8-bit width.">uint_fast8_t</a> file_index,
<a name="l00216"></a>00216                 <a class="code" href="group__stdint__group.html#gae1affc9ca37cfb624959c866a73f83c2" title="8-bit unsigned integer">uint8_t</a> *<a class="code" href="structbuffer.html" title="A generic data buffer.">buffer</a>);
<a name="l00217"></a>00217 
<a name="l00223"></a><a class="code" href="group__tsfs__group.html#gaba08a17d567da21828972bf44798a89b">00223</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__tsfs__group.html#gaba08a17d567da21828972bf44798a89b" title="Get the file size in bytes for file file.">tsfs_get_file_size</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs__file.html" title="Holds information about a specific file within a file system.">tsfs_file</a> *file)
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225         <span class="keywordflow">return</span> (file-&gt;<a class="code" href="structtsfs__file.html#a98f167f18585bf4db51cffd025c3da24" title="Address in storage where file ends.">end</a> - file-&gt;<a class="code" href="structtsfs__file.html#a58071d2a879b3739d7007a113e19999c" title="Address in storage where file starts.">start</a>);
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00233"></a><a class="code" href="group__tsfs__group.html#ga88cf5b8a152cf863fefd20fc99869545">00233</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__tsfs__group.html#ga88cf5b8a152cf863fefd20fc99869545" title="Returns the number of files present in a file system.">tsfs_nr_files</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235         <span class="keywordflow">return</span> tsfs-&gt;<a class="code" href="structtsfs.html#a1f870362039d7332fa689b890af0ca6f" title="TSFS header data.">header</a>.<a class="code" href="structtsfs__header.html#ab3d3d350beee3446a833b3d67800aa82" title="Number of files in the system.">nr_files</a>;
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00243"></a><a class="code" href="group__tsfs__group.html#gaeede48952c26734d9209530b8a8411ed">00243</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__tsfs__group.html#gaeede48952c26734d9209530b8a8411ed" title="Returns the size of the entire volume.">tsfs_volume_size</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>)
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245         <span class="keywordflow">return</span> tsfs-&gt;<a class="code" href="structtsfs.html#a1f870362039d7332fa689b890af0ca6f" title="TSFS header data.">header</a>.<a class="code" href="structtsfs__header.html#aa78d1e5516b5c39e7f2d0498cefb5650" title="Size of entire volume, including header.">volume_size</a>;
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 
<a name="l00253"></a><a class="code" href="group__tsfs__group.html#ga97aab27cfbdccc9aa7e43032c7507b15">00253</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__stdint__group.html#ga09a1e304d66d35dd47daffee9731edaa" title="32-bit unsigned integer">uint32_t</a> <a class="code" href="group__tsfs__group.html#ga97aab27cfbdccc9aa7e43032c7507b15" title="Check if file system is ready for use.">tsfs_is_ready</a>(<span class="keyword">struct</span> <a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a> *<a class="code" href="structtsfs.html" title="Holds information on a TSFS instance.">tsfs</a>)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255         <span class="keywordflow">return</span> (tsfs-&gt;<a class="code" href="structtsfs.html#a3897f4825919b933bbba1eec80bb2362" title="Pointer to file system&amp;#39;s associated block device.">bdev</a> &amp;&amp; tsfs-&gt;<a class="code" href="structtsfs.html#a161d7247c15580ef5410daf6f9a1b290" title="Current state of file system, for valid states see enum tsfs_status.">status</a> == <a class="code" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151a7e4a42e3b6dd63708c64cf3db6f69566" title="Success.">STATUS_OK</a>);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="preprocessor">#endif </span><span class="comment">/* FS_TSFS_H */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 6 2011 09:50:22 for display-training by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
