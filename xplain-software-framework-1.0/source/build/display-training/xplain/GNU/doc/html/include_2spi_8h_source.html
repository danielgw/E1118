<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>display-training: include/spi.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">display-training</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>include/spi.h</h1>  </div>
</div>
<div class="contents">
<a href="include_2spi_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00039"></a>00039 <span class="preprocessor">#ifndef SPI_H_INCLUDED</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#define SPI_H_INCLUDED</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="status__codes_8h.html" title="Status code definitions.">status_codes.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="workqueue_8h.html" title="Workqueue interface.">workqueue.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="include_2interrupt_8h.html" title="Interrupt masking/unmasking.">interrupt.h</a>&gt;</span>
<a name="l00045"></a>00045 
<a name="l00114"></a><a class="code" href="group__spi__group.html#ga49e8927a636f45641d6231ac63b9e598">00114</a> <span class="preprocessor">#define SPI_CPHA        (1 &lt;&lt; 0)</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span>
<a name="l00119"></a><a class="code" href="group__spi__group.html#gad8e335b1f808bd7408d2aef2377adcb1">00119</a> <span class="preprocessor">#define SPI_CPOL        (1 &lt;&lt; 1)</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00124"></a><a class="code" href="group__spi__group.html#ga1ec07ad94d5f6276c1c0b41d0550fe52">00124</a> <span class="preprocessor">#define SPI_MODE_0      0</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>
<a name="l00128"></a><a class="code" href="group__spi__group.html#gaf2af9f45539491c9753960535dc20fde">00128</a> <span class="preprocessor">#define SPI_MODE_1      (SPI_CPHA)</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span>
<a name="l00132"></a><a class="code" href="group__spi__group.html#ga8fa3edd8616f8803490c93f09243a612">00132</a> <span class="preprocessor">#define SPI_MODE_2      (SPI_CPOL)</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span>
<a name="l00136"></a><a class="code" href="group__spi__group.html#ga6a091da9f9011457fe28ab25f64c858d">00136</a> <span class="preprocessor">#define SPI_MODE_3      (SPI_CPOL | SPI_CPHA)</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>
<a name="l00144"></a><a class="code" href="structspi__master.html">00144</a> <span class="keyword">struct </span><a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> {
<a name="l00146"></a><a class="code" href="structspi__master.html#a8cc961bbd42bacad8c29a30b4ade5b10">00146</a>         <span class="keyword">struct </span><a class="code" href="structnested__workqueue.html" title="Nested Work Queue.">nested_workqueue</a> <a class="code" href="structspi__master.html#a8cc961bbd42bacad8c29a30b4ade5b10" title="Nested workqueue for pending work.">nwq</a>;
<a name="l00148"></a><a class="code" href="structspi__master.html#a42f99080ac3761deb56f95b35f40dd56">00148</a>         <span class="keyword">enum</span> <a class="code" href="status__codes_8h.html#a751c892e5a46b8e7d282085a5a5bf151">status_code</a>        <a class="code" href="structspi__master.html#a42f99080ac3761deb56f95b35f40dd56" title="Status of last operation.">status</a>;
<a name="l00150"></a><a class="code" href="structspi__master.html#aa38b5c0c0431f0697bb3fd31e6325028">00150</a>         <span class="keywordtype">size_t</span>                  <a class="code" href="structspi__master.html#aa38b5c0c0431f0697bb3fd31e6325028" title="Number of bytes remaining.">residue</a>;
<a name="l00151"></a>00151 };
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="preprocessor">#include &lt;chip/spi.h&gt;</span>
<a name="l00154"></a>00154 
<a name="l00223"></a><a class="code" href="group__spi__group.html#gad196c30f1762eff53760d86bbddad9aa">00223</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__spi__group.html#gad196c30f1762eff53760d86bbddad9aa" title="Request use of SPI bus.">spi_request_bus</a>(<span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master,
<a name="l00224"></a>00224                 <span class="keyword">struct</span> <a class="code" href="structworkqueue__task.html" title="Task to be run from a work queue.">workqueue_task</a> *task)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226         <span class="keywordflow">return</span> <a class="code" href="group__workqueue__group.html#gadd38acc207e3bfb0e8c17a59a7b875ba" title="Add task to nested work queue.">nested_workqueue_add_task</a>(&amp;master-&gt;<a class="code" href="structspi__master.html#a8cc961bbd42bacad8c29a30b4ade5b10" title="Nested workqueue for pending work.">nwq</a>, task);
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00236"></a><a class="code" href="group__spi__group.html#ga080f752ad66ac1d207cc869c828e13c6">00236</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__spi__group.html#ga080f752ad66ac1d207cc869c828e13c6" title="Release use of SPI bus.">spi_release_bus</a>(<span class="keyword">struct</span> <a class="code" href="structspi__master.html" title="SPI master.">spi_master</a> *master)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238         <a class="code" href="group__workqueue__group.html#gaace01054e8c6e9b4af76c58913c7a552" title="Switch to the next task in a nested work queue.">nested_workqueue_next_task</a>(&amp;master-&gt;<a class="code" href="structspi__master.html#a8cc961bbd42bacad8c29a30b4ade5b10" title="Nested workqueue for pending work.">nwq</a>);
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00376"></a>00376 <span class="preprocessor">#endif </span><span class="comment">/* SPI_H_INCLUDED */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 6 2011 09:50:22 for display-training by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
